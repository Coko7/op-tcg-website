const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChestAnimation3D-nlqAGILL.js","assets/three-react-DISlaC8-.js","assets/three-vendor-DjaRHb79.js"])))=>i.map(i=>d[i]);
var kt=Object.defineProperty;var _t=(t,s,r)=>s in t?kt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var Re=(t,s,r)=>_t(t,typeof s!="symbol"?s+"":s,r);import{r as o,j as e,_ as St,R as Rt,a as Et}from"./three-react-DISlaC8-.js";import"./three-vendor-DjaRHb79.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ge="popstate";function Lt(t={}){function s(l,a){let{pathname:n,search:i,hash:m}=l.location;return Pe("",{pathname:n,search:i,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(l,a){return typeof a=="string"?a:oe(a)}return $t(s,r,null,t)}function B(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function q(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Bt(){return Math.random().toString(36).substring(2,10)}function Ke(t,s){return{usr:t.state,key:t.key,idx:s}}function Pe(t,s,r=null,l){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?Q(s):s,state:r,key:s&&s.key||l||Bt()}}function oe({pathname:t="/",search:s="",hash:r=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Q(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substring(r),t=t.substring(0,r));let l=t.indexOf("?");l>=0&&(s.search=t.substring(l),t=t.substring(0,l)),t&&(s.pathname=t)}return s}function $t(t,s,r,l={}){let{window:a=document.defaultView,v5Compat:n=!1}=l,i=a.history,m="POP",u=null,c=d();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function d(){return(i.state||{idx:null}).idx}function h(){m="POP";let v=d(),p=v==null?null:v-c;c=v,u&&u({action:m,location:y.location,delta:p})}function x(v,p){m="PUSH";let f=Pe(y.location,v,p);c=d()+1;let j=Ke(f,c),S=y.createHref(f);try{i.pushState(j,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(S)}n&&u&&u({action:m,location:y.location,delta:1})}function g(v,p){m="REPLACE";let f=Pe(y.location,v,p);c=d();let j=Ke(f,c),S=y.createHref(f);i.replaceState(j,"",S),n&&u&&u({action:m,location:y.location,delta:0})}function w(v){return Tt(v)}let y={get action(){return m},get location(){return t(a,i)},listen(v){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(Ge,h),u=v,()=>{a.removeEventListener(Ge,h),u=null}},createHref(v){return s(a,v)},createURL:w,encodeLocation(v){let p=w(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:x,replace:g,go(v){return i.go(v)}};return y}function Tt(t,s=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),B(r,"No window.location.(origin|href) available to create URL");let l=typeof t=="string"?t:oe(t);return l=l.replace(/ $/,"%20"),!s&&l.startsWith("//")&&(l=r+l),new URL(l,r)}function rt(t,s,r="/"){return At(t,s,r,!1)}function At(t,s,r,l){let a=typeof s=="string"?Q(s):s,n=G(a.pathname||"/",r);if(n==null)return null;let i=at(t);Pt(i);let m=null;for(let u=0;m==null&&u<i.length;++u){let c=Vt(n);m=Ht(i[u],c,l)}return m}function at(t,s=[],r=[],l="",a=!1){let n=(i,m,u=a,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:m,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(l)&&u)return;B(d.relativePath.startsWith(l),`Absolute route path "${d.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(l.length)}let h=Y([l,d.relativePath]),x=r.concat(d);i.children&&i.children.length>0&&(B(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),at(i.children,s,x,h,u)),!(i.path==null&&!i.index)&&s.push({path:h,score:qt(h,i.index),routesMeta:x})};return t.forEach((i,m)=>{if(i.path===""||!i.path?.includes("?"))n(i,m);else for(let u of lt(i.path))n(i,m,!0,u)}),s}function lt(t){let s=t.split("/");if(s.length===0)return[];let[r,...l]=s,a=r.endsWith("?"),n=r.replace(/\?$/,"");if(l.length===0)return a?[n,""]:[n];let i=lt(l.join("/")),m=[];return m.push(...i.map(u=>u===""?n:[n,u].join("/"))),a&&m.push(...i),m.map(u=>t.startsWith("/")&&u===""?"/":u)}function Pt(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:Ut(s.routesMeta.map(l=>l.childrenIndex),r.routesMeta.map(l=>l.childrenIndex)))}var Mt=/^:[\w-]+$/,zt=3,Dt=2,Ot=1,It=10,Ft=-2,Xe=t=>t==="*";function qt(t,s){let r=t.split("/"),l=r.length;return r.some(Xe)&&(l+=Ft),s&&(l+=Dt),r.filter(a=>!Xe(a)).reduce((a,n)=>a+(Mt.test(n)?zt:n===""?Ot:It),l)}function Ut(t,s){return t.length===s.length&&t.slice(0,-1).every((l,a)=>l===s[a])?t[t.length-1]-s[s.length-1]:0}function Ht(t,s,r=!1){let{routesMeta:l}=t,a={},n="/",i=[];for(let m=0;m<l.length;++m){let u=l[m],c=m===l.length-1,d=n==="/"?s:s.slice(n.length)||"/",h=be({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),x=u.route;if(!h&&c&&r&&!l[l.length-1].route.index&&(h=be({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),i.push({params:a,pathname:Y([n,h.pathname]),pathnameBase:Kt(Y([n,h.pathnameBase])),route:x}),h.pathnameBase!=="/"&&(n=Y([n,h.pathnameBase]))}return i}function be(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,l]=Wt(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:l.reduce((c,{paramName:d,isOptional:h},x)=>{if(d==="*"){let w=m[x]||"";i=n.slice(0,n.length-w.length).replace(/(.)\/+$/,"$1")}const g=m[x];return h&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:n,pathnameBase:i,pattern:t}}function Wt(t,s=!1,r=!0){q(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let l=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,m,u)=>(l.push({paramName:m,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(l.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),l]}function Vt(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return q(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function G(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,l=t.charAt(r);return l&&l!=="/"?null:t.slice(r)||"/"}function Jt(t,s="/"){let{pathname:r,search:l="",hash:a=""}=typeof t=="string"?Q(t):t;return{pathname:r?r.startsWith("/")?r:Yt(r,s):s,search:Xt(l),hash:Zt(a)}}function Yt(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ee(t,s,r,l){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gt(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function qe(t){let s=Gt(t);return s.map((r,l)=>l===s.length-1?r.pathname:r.pathnameBase)}function Ue(t,s,r,l=!1){let a;typeof t=="string"?a=Q(t):(a={...t},B(!a.pathname||!a.pathname.includes("?"),Ee("?","pathname","search",a)),B(!a.pathname||!a.pathname.includes("#"),Ee("#","pathname","hash",a)),B(!a.search||!a.search.includes("#"),Ee("#","search","hash",a)));let n=t===""||a.pathname==="",i=n?"/":a.pathname,m;if(i==null)m=r;else{let h=s.length-1;if(!l&&i.startsWith("..")){let x=i.split("/");for(;x[0]==="..";)x.shift(),h-=1;a.pathname=x.join("/")}m=h>=0?s[h]:"/"}let u=Jt(a,m),c=i&&i!=="/"&&i.endsWith("/"),d=(n||i===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var Y=t=>t.join("/").replace(/\/\/+/g,"/"),Kt=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Xt=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Zt=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qt(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var nt=["POST","PUT","PATCH","DELETE"];new Set(nt);var es=["GET",...nt];new Set(es);var ee=o.createContext(null);ee.displayName="DataRouter";var we=o.createContext(null);we.displayName="DataRouterState";o.createContext(!1);var ot=o.createContext({isTransitioning:!1});ot.displayName="ViewTransition";var ts=o.createContext(new Map);ts.displayName="Fetchers";var ss=o.createContext(null);ss.displayName="Await";var U=o.createContext(null);U.displayName="Navigation";var ce=o.createContext(null);ce.displayName="Location";var H=o.createContext({outlet:null,matches:[],isDataRoute:!1});H.displayName="Route";var He=o.createContext(null);He.displayName="RouteError";function rs(t,{relative:s}={}){B(te(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:l}=o.useContext(U),{hash:a,pathname:n,search:i}=ue(t,{relative:s}),m=n;return r!=="/"&&(m=n==="/"?r:Y([r,n])),l.createHref({pathname:m,search:i,hash:a})}function te(){return o.useContext(ce)!=null}function W(){return B(te(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(ce).location}var it="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ct(t){o.useContext(U).static||o.useLayoutEffect(t)}function de(){let{isDataRoute:t}=o.useContext(H);return t?gs():as()}function as(){B(te(),"useNavigate() may be used only in the context of a <Router> component.");let t=o.useContext(ee),{basename:s,navigator:r}=o.useContext(U),{matches:l}=o.useContext(H),{pathname:a}=W(),n=JSON.stringify(qe(l)),i=o.useRef(!1);return ct(()=>{i.current=!0}),o.useCallback((u,c={})=>{if(q(i.current,it),!i.current)return;if(typeof u=="number"){r.go(u);return}let d=Ue(u,JSON.parse(n),a,c.relative==="path");t==null&&s!=="/"&&(d.pathname=d.pathname==="/"?s:Y([s,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[s,r,n,a,t])}var ls=o.createContext(null);function ns(t){let s=o.useContext(H).outlet;return o.useMemo(()=>s&&o.createElement(ls.Provider,{value:t},s),[s,t])}function ue(t,{relative:s}={}){let{matches:r}=o.useContext(H),{pathname:l}=W(),a=JSON.stringify(qe(r));return o.useMemo(()=>Ue(t,JSON.parse(a),l,s==="path"),[t,a,l,s])}function os(t,s){return dt(t,s)}function dt(t,s,r,l,a){B(te(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=o.useContext(U),{matches:i}=o.useContext(H),m=i[i.length-1],u=m?m.params:{},c=m?m.pathname:"/",d=m?m.pathnameBase:"/",h=m&&m.route;{let f=h&&h.path||"";ut(c,!h||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let x=W(),g;if(s){let f=typeof s=="string"?Q(s):s;B(d==="/"||f.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${f.pathname}" was given in the \`location\` prop.`),g=f}else g=x;let w=g.pathname||"/",y=w;if(d!=="/"){let f=d.replace(/^\//,"").split("/");y="/"+w.replace(/^\//,"").split("/").slice(f.length).join("/")}let v=rt(t,{pathname:y});q(h||v!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),q(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=ms(v&&v.map(f=>Object.assign({},f,{params:Object.assign({},u,f.params),pathname:Y([d,n.encodeLocation?n.encodeLocation(f.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?d:Y([d,n.encodeLocation?n.encodeLocation(f.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:f.pathnameBase])})),i,r,l,a);return s&&p?o.createElement(ce.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},p):p}function is(){let t=bs(),s=Qt(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,l="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:l},n={padding:"2px 4px",backgroundColor:l},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=o.createElement(o.Fragment,null,o.createElement("p",null,"💿 Hey developer 👋"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:n},"ErrorBoundary")," or"," ",o.createElement("code",{style:n},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},s),r?o.createElement("pre",{style:a},r):null,i)}var cs=o.createElement(is,null),ds=class extends o.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.unstable_onError?this.props.unstable_onError(t,s):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?o.createElement(H.Provider,{value:this.props.routeContext},o.createElement(He.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function us({routeContext:t,match:s,children:r}){let l=o.useContext(ee);return l&&l.static&&l.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=s.route.id),o.createElement(H.Provider,{value:t},r)}function ms(t,s=[],r=null,l=null,a=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let n=t,i=r?.errors;if(i!=null){let c=n.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);B(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),n=n.slice(0,Math.min(n.length,c+1))}let m=!1,u=-1;if(r)for(let c=0;c<n.length;c++){let d=n[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:x}=r,g=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!x||x[d.route.id]===void 0);if(d.route.lazy||g){m=!0,u>=0?n=n.slice(0,u+1):n=[n[0]];break}}}return n.reduceRight((c,d,h)=>{let x,g=!1,w=null,y=null;r&&(x=i&&d.route.id?i[d.route.id]:void 0,w=d.route.errorElement||cs,m&&(u<0&&h===0?(ut("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):u===h&&(g=!0,y=d.route.hydrateFallbackElement||null)));let v=s.concat(n.slice(0,h+1)),p=()=>{let f;return x?f=w:g?f=y:d.route.Component?f=o.createElement(d.route.Component,null):d.route.element?f=d.route.element:f=c,o.createElement(us,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:r!=null},children:f})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?o.createElement(ds,{location:r.location,revalidation:r.revalidation,component:w,error:x,children:p(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:l}):p()},null)}function We(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xs(t){let s=o.useContext(ee);return B(s,We(t)),s}function hs(t){let s=o.useContext(we);return B(s,We(t)),s}function ps(t){let s=o.useContext(H);return B(s,We(t)),s}function Ve(t){let s=ps(t),r=s.matches[s.matches.length-1];return B(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function fs(){return Ve("useRouteId")}function bs(){let t=o.useContext(He),s=hs("useRouteError"),r=Ve("useRouteError");return t!==void 0?t:s.errors?.[r]}function gs(){let{router:t}=xs("useNavigate"),s=Ve("useNavigate"),r=o.useRef(!1);return ct(()=>{r.current=!0}),o.useCallback(async(a,n={})=>{q(r.current,it),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:s,...n}))},[t,s])}var Ze={};function ut(t,s,r){!s&&!Ze[t]&&(Ze[t]=!0,q(!1,r))}o.memo(ys);function ys({routes:t,future:s,state:r,unstable_onError:l}){return dt(t,void 0,r,l,s)}function Le({to:t,replace:s,state:r,relative:l}){B(te(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=o.useContext(U);q(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:n}=o.useContext(H),{pathname:i}=W(),m=de(),u=Ue(t,qe(n),i,l==="path"),c=JSON.stringify(u);return o.useEffect(()=>{m(JSON.parse(c),{replace:s,state:r,relative:l})},[m,c,l,s,r]),null}function vs(t){return ns(t.context)}function V(t){B(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ws({basename:t="/",children:s=null,location:r,navigationType:l="POP",navigator:a,static:n=!1}){B(!te(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),m=o.useMemo(()=>({basename:i,navigator:a,static:n,future:{}}),[i,a,n]);typeof r=="string"&&(r=Q(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:x="default"}=r,g=o.useMemo(()=>{let w=G(u,i);return w==null?null:{location:{pathname:w,search:c,hash:d,state:h,key:x},navigationType:l}},[i,u,c,d,h,x,l]);return q(g!=null,`<Router basename="${i}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:o.createElement(U.Provider,{value:m},o.createElement(ce.Provider,{children:s,value:g}))}function js({children:t,location:s}){return os(Me(t),s)}function Me(t,s=[]){let r=[];return o.Children.forEach(t,(l,a)=>{if(!o.isValidElement(l))return;let n=[...s,a];if(l.type===o.Fragment){r.push.apply(r,Me(l.props.children,n));return}B(l.type===V,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),B(!l.props.index||!l.props.children,"An index route cannot have child routes.");let i={id:l.props.id||n.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(i.children=Me(l.props.children,n)),r.push(i)}),r}var pe="get",fe="application/x-www-form-urlencoded";function je(t){return t!=null&&typeof t.tagName=="string"}function Ns(t){return je(t)&&t.tagName.toLowerCase()==="button"}function Cs(t){return je(t)&&t.tagName.toLowerCase()==="form"}function ks(t){return je(t)&&t.tagName.toLowerCase()==="input"}function _s(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ss(t,s){return t.button===0&&(!s||s==="_self")&&!_s(t)}var xe=null;function Rs(){if(xe===null)try{new FormData(document.createElement("form"),0),xe=!1}catch{xe=!0}return xe}var Es=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Be(t){return t!=null&&!Es.has(t)?(q(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fe}"`),null):t}function Ls(t,s){let r,l,a,n,i;if(Cs(t)){let m=t.getAttribute("action");l=m?G(m,s):null,r=t.getAttribute("method")||pe,a=Be(t.getAttribute("enctype"))||fe,n=new FormData(t)}else if(Ns(t)||ks(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||m.getAttribute("action");if(l=u?G(u,s):null,r=t.getAttribute("formmethod")||m.getAttribute("method")||pe,a=Be(t.getAttribute("formenctype"))||Be(m.getAttribute("enctype"))||fe,n=new FormData(m,t),!Rs()){let{name:c,type:d,value:h}=t;if(d==="image"){let x=c?`${c}.`:"";n.append(`${x}x`,"0"),n.append(`${x}y`,"0")}else c&&n.append(c,h)}}else{if(je(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=pe,l=null,a=fe,i=t}return n&&a==="text/plain"&&(i=n,n=void 0),{action:l,method:r.toLowerCase(),encType:a,formData:n,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Je(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Bs(t,s,r){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return l.pathname==="/"?l.pathname=`_root.${r}`:s&&G(l.pathname,s)==="/"?l.pathname=`${s.replace(/\/$/,"")}/_root.${r}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${r}`,l}async function $s(t,s){if(t.id in s)return s[t.id];try{let r=await import(t.module);return s[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ts(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function As(t,s,r){let l=await Promise.all(t.map(async a=>{let n=s.routes[a.route.id];if(n){let i=await $s(n,r);return i.links?i.links():[]}return[]}));return Ds(l.flat(1).filter(Ts).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Qe(t,s,r,l,a,n){let i=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,m=(u,c)=>r[c].pathname!==u.pathname||r[c].route.path?.endsWith("*")&&r[c].params["*"]!==u.params["*"];return n==="assets"?s.filter((u,c)=>i(u,c)||m(u,c)):n==="data"?s.filter((u,c)=>{let d=l.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(i(u,c)||m(u,c))return!0;if(u.route.shouldRevalidate){let h=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Ps(t,s,{includeHydrateFallback:r}={}){return Ms(t.map(l=>{let a=s.routes[l.route.id];if(!a)return[];let n=[a.module];return a.clientActionModule&&(n=n.concat(a.clientActionModule)),a.clientLoaderModule&&(n=n.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(n=n.concat(a.hydrateFallbackModule)),a.imports&&(n=n.concat(a.imports)),n}).flat(1))}function Ms(t){return[...new Set(t)]}function zs(t){let s={},r=Object.keys(t).sort();for(let l of r)s[l]=t[l];return s}function Ds(t,s){let r=new Set;return new Set(s),t.reduce((l,a)=>{let n=JSON.stringify(zs(a));return r.has(n)||(r.add(n),l.push({key:n,link:a})),l},[])}function mt(){let t=o.useContext(ee);return Je(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Os(){let t=o.useContext(we);return Je(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ye=o.createContext(void 0);Ye.displayName="FrameworkContext";function xt(){let t=o.useContext(Ye);return Je(t,"You must render this element inside a <HydratedRouter> element"),t}function Is(t,s){let r=o.useContext(Ye),[l,a]=o.useState(!1),[n,i]=o.useState(!1),{onFocus:m,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=s,x=o.useRef(null);o.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let y=p=>{p.forEach(f=>{i(f.isIntersecting)})},v=new IntersectionObserver(y,{threshold:.5});return x.current&&v.observe(x.current),()=>{v.disconnect()}}},[t]),o.useEffect(()=>{if(l){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[l]);let g=()=>{a(!0)},w=()=>{a(!1),i(!1)};return r?t!=="intent"?[n,x,{}]:[n,x,{onFocus:ae(m,g),onBlur:ae(u,w),onMouseEnter:ae(c,g),onMouseLeave:ae(d,w),onTouchStart:ae(h,g)}]:[!1,x,{}]}function ae(t,s){return r=>{t&&t(r),r.defaultPrevented||s(r)}}function Fs({page:t,...s}){let{router:r}=mt(),l=o.useMemo(()=>rt(r.routes,t,r.basename),[r.routes,t,r.basename]);return l?o.createElement(Us,{page:t,matches:l,...s}):null}function qs(t){let{manifest:s,routeModules:r}=xt(),[l,a]=o.useState([]);return o.useEffect(()=>{let n=!1;return As(t,s,r).then(i=>{n||a(i)}),()=>{n=!0}},[t,s,r]),l}function Us({page:t,matches:s,...r}){let l=W(),{manifest:a,routeModules:n}=xt(),{basename:i}=mt(),{loaderData:m,matches:u}=Os(),c=o.useMemo(()=>Qe(t,s,u,a,l,"data"),[t,s,u,a,l]),d=o.useMemo(()=>Qe(t,s,u,a,l,"assets"),[t,s,u,a,l]),h=o.useMemo(()=>{if(t===l.pathname+l.search+l.hash)return[];let w=new Set,y=!1;if(s.forEach(p=>{let f=a.routes[p.route.id];!f||!f.hasLoader||(!c.some(j=>j.route.id===p.route.id)&&p.route.id in m&&n[p.route.id]?.shouldRevalidate||f.hasClientLoader?y=!0:w.add(p.route.id))}),w.size===0)return[];let v=Bs(t,i,"data");return y&&w.size>0&&v.searchParams.set("_routes",s.filter(p=>w.has(p.route.id)).map(p=>p.route.id).join(",")),[v.pathname+v.search]},[i,m,l,a,c,s,t,n]),x=o.useMemo(()=>Ps(d,a),[d,a]),g=qs(d);return o.createElement(o.Fragment,null,h.map(w=>o.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),x.map(w=>o.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),g.map(({key:w,link:y})=>o.createElement("link",{key:w,nonce:r.nonce,...y})))}function Hs(...t){return s=>{t.forEach(r=>{typeof r=="function"?r(s):r!=null&&(r.current=s)})}}var ht=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ht&&(window.__reactRouterVersion="7.9.3")}catch{}function Ws({basename:t,children:s,window:r}){let l=o.useRef();l.current==null&&(l.current=Lt({window:r,v5Compat:!0}));let a=l.current,[n,i]=o.useState({action:a.action,location:a.location}),m=o.useCallback(u=>{o.startTransition(()=>i(u))},[i]);return o.useLayoutEffect(()=>a.listen(m),[a,m]),o.createElement(ws,{basename:t,children:s,location:n.location,navigationType:n.action,navigator:a})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A=o.forwardRef(function({onClick:s,discover:r="render",prefetch:l="none",relative:a,reloadDocument:n,replace:i,state:m,target:u,to:c,preventScrollReset:d,viewTransition:h,...x},g){let{basename:w}=o.useContext(U),y=typeof c=="string"&&pt.test(c),v,p=!1;if(typeof c=="string"&&y&&(v=c,ht))try{let T=new URL(window.location.href),O=c.startsWith("//")?new URL(T.protocol+c):new URL(c),D=G(O.pathname,w);O.origin===T.origin&&D!=null?c=D+O.search+O.hash:p=!0}catch{q(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let f=rs(c,{relative:a}),[j,S,R]=Is(l,x),L=Gs(c,{replace:i,state:m,target:u,preventScrollReset:d,relative:a,viewTransition:h});function P(T){s&&s(T),T.defaultPrevented||L(T)}let $=o.createElement("a",{...x,...R,href:v||f,onClick:p||n?s:P,ref:Hs(g,S),target:u,"data-discover":!y&&r==="render"?"true":void 0});return j&&!y?o.createElement(o.Fragment,null,$,o.createElement(Fs,{page:f})):$});A.displayName="Link";var Vs=o.forwardRef(function({"aria-current":s="page",caseSensitive:r=!1,className:l="",end:a=!1,style:n,to:i,viewTransition:m,children:u,...c},d){let h=ue(i,{relative:c.relative}),x=W(),g=o.useContext(we),{navigator:w,basename:y}=o.useContext(U),v=g!=null&&er(h)&&m===!0,p=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,f=x.pathname,j=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(f=f.toLowerCase(),j=j?j.toLowerCase():null,p=p.toLowerCase()),j&&y&&(j=G(j,y)||j);const S=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let R=f===p||!a&&f.startsWith(p)&&f.charAt(S)==="/",L=j!=null&&(j===p||!a&&j.startsWith(p)&&j.charAt(p.length)==="/"),P={isActive:R,isPending:L,isTransitioning:v},$=R?s:void 0,T;typeof l=="function"?T=l(P):T=[l,R?"active":null,L?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let O=typeof n=="function"?n(P):n;return o.createElement(A,{...c,"aria-current":$,className:T,ref:d,style:O,to:i,viewTransition:m},typeof u=="function"?u(P):u)});Vs.displayName="NavLink";var Js=o.forwardRef(({discover:t="render",fetcherKey:s,navigate:r,reloadDocument:l,replace:a,state:n,method:i=pe,action:m,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:h,...x},g)=>{let w=Zs(),y=Qs(m,{relative:c}),v=i.toLowerCase()==="get"?"get":"post",p=typeof m=="string"&&pt.test(m),f=j=>{if(u&&u(j),j.defaultPrevented)return;j.preventDefault();let S=j.nativeEvent.submitter,R=S?.getAttribute("formmethod")||i;w(S||j.currentTarget,{fetcherKey:s,method:R,navigate:r,replace:a,state:n,relative:c,preventScrollReset:d,viewTransition:h})};return o.createElement("form",{ref:g,method:v,action:y,onSubmit:l?u:f,...x,"data-discover":!p&&t==="render"?"true":void 0})});Js.displayName="Form";function Ys(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ft(t){let s=o.useContext(ee);return B(s,Ys(t)),s}function Gs(t,{target:s,replace:r,state:l,preventScrollReset:a,relative:n,viewTransition:i}={}){let m=de(),u=W(),c=ue(t,{relative:n});return o.useCallback(d=>{if(Ss(d,s)){d.preventDefault();let h=r!==void 0?r:oe(u)===oe(c);m(t,{replace:h,state:l,preventScrollReset:a,relative:n,viewTransition:i})}},[u,m,c,r,l,s,t,a,n,i])}var Ks=0,Xs=()=>`__${String(++Ks)}__`;function Zs(){let{router:t}=ft("useSubmit"),{basename:s}=o.useContext(U),r=fs();return o.useCallback(async(l,a={})=>{let{action:n,method:i,encType:m,formData:u,body:c}=Ls(l,s);if(a.navigate===!1){let d=a.fetcherKey||Xs();await t.fetch(d,r,a.action||n,{preventScrollReset:a.preventScrollReset,formData:u,body:c,formMethod:a.method||i,formEncType:a.encType||m,flushSync:a.flushSync})}else await t.navigate(a.action||n,{preventScrollReset:a.preventScrollReset,formData:u,body:c,formMethod:a.method||i,formEncType:a.encType||m,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,s,r])}function Qs(t,{relative:s}={}){let{basename:r}=o.useContext(U),l=o.useContext(H);B(l,"useFormAction must be used inside a RouteContext");let[a]=l.matches.slice(-1),n={...ue(t||".",{relative:s})},i=W();if(t==null){n.search=i.search;let m=new URLSearchParams(n.search),u=m.getAll("index");if(u.some(d=>d==="")){m.delete("index"),u.filter(h=>h).forEach(h=>m.append("index",h));let d=m.toString();n.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(n.search=n.search?n.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(n.pathname=n.pathname==="/"?r:Y([r,n.pathname])),oe(n)}function er(t,{relative:s}={}){let r=o.useContext(ot);B(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=ft("useViewTransitionState"),a=ue(t,{relative:s});if(!r.isTransitioning)return!1;let n=G(r.currentLocation.pathname,l)||r.currentLocation.pathname,i=G(r.nextLocation.pathname,l)||r.nextLocation.pathname;return be(a.pathname,i)!=null||be(a.pathname,n)!=null}const et="http://framboise.lan:5000/api";class tr{constructor(){Re(this,"accessToken",null);Re(this,"refreshToken",null);this.accessToken=localStorage.getItem("accessToken"),this.refreshToken=localStorage.getItem("refreshToken")}async request(s,r={}){const l=`${et}${s}`,a={"Content-Type":"application/json",...r.headers||{}};this.accessToken&&(a.Authorization=`Bearer ${this.accessToken}`);try{const n=await fetch(l,{...r,headers:a});if(!n.ok){const i=await n.json().catch(()=>null);if(n.status===401&&i?.code==="TOKEN_EXPIRED"&&this.refreshToken&&await this.refreshAccessToken()){a.Authorization=`Bearer ${this.accessToken}`;const u=await fetch(l,{...r,headers:a});if(u.ok)return await u.json()}throw new Error(i?.error||`HTTP error! status: ${n.status}`)}return await n.json()}catch(n){throw console.error("API request failed:",n),n}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const s=await fetch(`${et}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:this.refreshToken})});if(s.ok){const r=await s.json();return this.setAccessToken(r.accessToken),!0}else return this.logout(),!1}catch(s){return console.error("Token refresh failed:",s),this.logout(),!1}}setTokens(s,r){this.accessToken=s,this.refreshToken=r,localStorage.setItem("accessToken",s),localStorage.setItem("refreshToken",r)}setAccessToken(s){this.accessToken=s,localStorage.setItem("accessToken",s)}clearTokens(){this.accessToken=null,this.refreshToken=null,localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}async login(s){const r=await this.request("/auth/login",{method:"POST",body:JSON.stringify(s)});return this.setTokens(r.accessToken,r.refreshToken),r}async register(s){const r=await this.request("/auth/register",{method:"POST",body:JSON.stringify(s)});return this.setTokens(r.accessToken,r.refreshToken),r}async logout(){try{this.refreshToken&&await this.request("/auth/logout",{method:"POST",body:JSON.stringify({refreshToken:this.refreshToken})})}catch(s){console.error("Logout request failed:",s)}finally{this.clearTokens()}}async getCurrentUser(){return await this.request("/auth/me")}async getCards(s){const r=new URLSearchParams;s?.page&&r.append("page",s.page.toString()),s?.limit&&r.append("limit",s.limit.toString()),s?.search&&r.append("search",s.search),s?.booster_id&&r.append("booster_id",s.booster_id),s?.rarity&&r.append("rarity",s.rarity);const l=r.toString();return await this.request(`/cards${l?`?${l}`:""}`)}async getCard(s){return await this.request(`/cards/${s}`)}async getBoosters(s){const r=new URLSearchParams;s?.page&&r.append("page",s.page.toString()),s?.limit&&r.append("limit",s.limit.toString()),s?.search&&r.append("search",s.search),s?.series&&r.append("series",s.series);const l=r.toString();return await this.request(`/boosters${l?`?${l}`:""}`)}async getBooster(s){return await this.request(`/boosters/${s}`)}async getStats(){return await this.request("/users/stats")}async getUserCollection(){return await this.request("/users/collection")}async addCardsToCollection(s){return await this.request("/users/collection",{method:"POST",body:JSON.stringify({cardIds:s})})}async toggleFavorite(s){return await this.request(`/users/collection/favorite/${s}`,{method:"PUT"})}async getBoosterStatus(){return await this.request("/users/booster-status")}async openBooster(s){return await this.request("/users/open-booster",{method:"POST",body:JSON.stringify({boosterId:s})})}async buyBoosterWithBerrys(){return await this.request("/users/buy-booster",{method:"POST"})}async sellCard(s,r=1){return await this.request("/users/sell-card",{method:"POST",body:JSON.stringify({cardId:s,quantity:r})})}async getBerrysBalance(){return await this.request("/users/berrys")}async checkDailyReward(){return await this.request("/users/daily-reward/check")}async claimDailyReward(){return await this.request("/users/daily-reward/claim",{method:"POST"})}async getAchievements(){return await this.request("/users/achievements")}async getAchievementStats(){return await this.request("/users/achievements/stats")}async claimAchievement(s){return await this.request(`/users/achievements/${s}/claim`,{method:"POST"})}async getLeaderboard(){return await this.request("/leaderboard")}async getNotifications(){return await this.request("/notifications")}async claimNotification(s){return await this.request(`/notifications/${s}/claim`,{method:"POST"})}isAuthenticated(){return!!this.accessToken}getAccessToken(){return this.accessToken}}const _=new tr,bt=o.createContext(void 0),sr=({children:t})=>{const[s,r]=o.useState({user:null,isAuthenticated:!1,isLoading:!0,stats:null});o.useEffect(()=>{(async()=>{if(_.isAuthenticated())try{const c=await _.getCurrentUser();r({user:c.user,isAuthenticated:!0,isLoading:!1,stats:c.stats})}catch(c){console.error("Erreur lors de la vérification de l'authentification:",c),r({user:null,isAuthenticated:!1,isLoading:!1,stats:null})}else r({user:null,isAuthenticated:!1,isLoading:!1,stats:null})})()},[]);const l=async u=>{try{r(h=>({...h,isLoading:!0}));const c=await _.login(u),d=await _.getStats();r({user:c.user,isAuthenticated:!0,isLoading:!1,stats:d.data})}catch(c){throw r(d=>({...d,isLoading:!1})),c}},a=async u=>{try{r(h=>({...h,isLoading:!0}));const c=await _.register(u),d=await _.getStats();r({user:c.user,isAuthenticated:!0,isLoading:!1,stats:d.data})}catch(c){throw r(d=>({...d,isLoading:!1})),c}},n=async()=>{try{await _.logout()}catch(u){console.error("Logout error:",u)}finally{r({user:null,isAuthenticated:!1,isLoading:!1,stats:null})}},m={...s,login:l,register:a,logout:n,refreshUser:async()=>{if(_.isAuthenticated())try{const u=await _.getCurrentUser();r(c=>({...c,user:u.user,stats:u.stats}))}catch(u){console.error("Failed to refresh user:",u),await n()}}};return e.jsx(bt.Provider,{value:m,children:t})},se=()=>{const t=o.useContext(bt);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gt=(...t)=>t.filter((s,r,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ar={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=o.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:a="",children:n,iconNode:i,...m},u)=>o.createElement("svg",{ref:u,...ar,width:s,height:s,stroke:t,strokeWidth:l?Number(r)*24/Number(s):r,className:gt("lucide",a),...m},[...i.map(([c,d])=>o.createElement(c,d)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=(t,s)=>{const r=o.forwardRef(({className:l,...a},n)=>o.createElement(lr,{ref:n,iconNode:s,className:gt(`lucide-${rr(t)}`,l),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=E("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=E("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=E("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=E("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=E("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=E("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=E("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=E("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=E("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=E("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=E("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=E("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=E("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=E("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=E("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=E("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=E("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=E("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=E("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=E("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=E("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=E("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=E("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=E("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=E("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=E("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=E("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=E("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=E("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=E("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=E("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=E("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),jr=()=>{const{user:t,logout:s,stats:r}=se();if(!t)return null;const l=async()=>{try{await s()}catch(a){console.error("Logout error:",a)}};return e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:t.username.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:t.username}),t.is_admin&&e.jsx("span",{className:"inline-block bg-yellow-500 text-black text-xs px-2 py-1 rounded mt-1",children:"Admin"})]})]}),e.jsx("button",{onClick:l,className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md text-sm transition-colors",children:"Déconnexion"})]}),r&&e.jsxs("div",{className:"border-t border-white/20 pt-4",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Statistiques"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Cartes uniques"}),e.jsx("p",{className:"text-white font-semibold",children:r.unique_cards||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Total cartes"}),e.jsx("p",{className:"text-white font-semibold",children:r.total_cards||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Boosters ouverts"}),e.jsx("p",{className:"text-white font-semibold",children:r.total_openings||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Aujourd'hui"}),e.jsx("p",{className:"text-white font-semibold",children:r.today_openings||0})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between bg-yellow-500/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"text-yellow-400",size:24}),e.jsx("span",{className:"text-white font-medium",children:"Berrys"})]}),e.jsx("div",{className:"text-yellow-400 font-bold text-xl",children:t.berrys||0})]})})]})]})},Nr=({isOpen:t,onClose:s,notifications:r,onClaimReward:l,onRefresh:a})=>{const[n,i]=o.useState(null),[m,u]=o.useState(new Set),c=async x=>{try{i(x.id);const g=await l(x.id);g&&(u(w=>new Set(w).add(x.id)),alert(`Récompense réclamée !

${g.berrys_earned>0?`+ ${g.berrys_earned} Berrys
`:""}${g.boosters_earned>0?`+ ${g.boosters_earned} Booster(s)
`:""}
Nouveau solde: ${g.new_balance} Berrys`),setTimeout(()=>{a()},500))}catch(g){console.error("Erreur lors de la réclamation:",g),alert(g.message||"Erreur lors de la réclamation de la récompense")}finally{i(null)}},d=x=>new Date(x).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=x=>x?new Date(x)<new Date:!1;return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900 to-purple-900 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col border-2 border-blue-500/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ye,{className:"text-yellow-300",size:28}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Notifications"})]}),e.jsx("button",{onClick:s,className:"text-gray-300 hover:text-white transition-colors","aria-label":"Fermer",children:e.jsx(ie,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"w-16 h-16 text-green-400 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Aucune notification pour le moment"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Les nouvelles notifications apparaîtront ici"})]}):e.jsx("div",{className:"space-y-4",children:r.map(x=>{const g=m.has(x.id),w=h(x.expires_at),y=x.reward_berrys>0||x.reward_boosters>0;return e.jsxs("div",{className:`bg-blue-800/40 backdrop-blur-sm rounded-lg p-4 border ${w?"border-gray-600/30 opacity-60":"border-blue-600/30"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:x.title}),e.jsx("p",{className:"text-blue-200 text-sm mb-2",children:x.message})]})}),y&&e.jsxs("div",{className:"flex items-center gap-4 mb-3 flex-wrap",children:[x.reward_berrys>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-600/20 px-3 py-1.5 rounded-lg",children:[e.jsx(I,{className:"text-yellow-300",size:18}),e.jsxs("span",{className:"text-yellow-200 font-bold",children:["+",x.reward_berrys," Berrys"]})]}),x.reward_boosters>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-purple-600/20 px-3 py-1.5 rounded-lg",children:[e.jsx(wr,{className:"text-purple-300",size:18}),e.jsxs("span",{className:"text-purple-200 font-bold",children:["+",x.reward_boosters," Booster(s)"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-blue-600/20",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(wt,{size:14}),e.jsx("span",{children:d(x.created_at)}),x.expires_at&&e.jsxs("span",{className:"ml-2",children:["• Expire le ",d(x.expires_at)]})]}),y&&!g&&!w&&e.jsx("button",{onClick:()=>c(x),disabled:n===x.id,className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold rounded-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:n===x.id?"Réclamation...":e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"inline-block mr-1",size:16}),"Réclamer"]})}),g&&e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm font-bold",children:[e.jsx(ge,{size:16}),e.jsx("span",{children:"Réclamé"})]}),w&&!g&&e.jsx("div",{className:"text-red-400 text-sm font-bold",children:"Expiré"})]})]},x.id)})})}),e.jsx("div",{className:"p-4 border-t border-blue-500/30 bg-blue-900/50",children:e.jsx("button",{onClick:s,className:"w-full py-2 px-4 bg-blue-700 hover:bg-blue-600 text-white font-bold rounded-lg transition-all",children:"Fermer"})})]})}):null},Cr=()=>{const[t,s]=o.useState([]),[r,l]=o.useState(0),[a,n]=o.useState(!1),[i,m]=o.useState(!1),u=async()=>{try{m(!0);const d=await _.getNotifications();d.success&&(s(d.data||[]),l(d.unread_count||0))}catch(d){console.error("Erreur lors de la récupération des notifications:",d)}finally{m(!1)}};o.useEffect(()=>{u();const d=setInterval(u,12e4);return()=>clearInterval(d)},[]);const c=async d=>{try{const h=await _.claimNotification(d);return h.success?(await u(),h.data):null}catch(h){throw console.error("Erreur lors de la réclamation de la notification:",h),h}};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>n(!0),className:"relative p-2 text-white hover:text-yellow-300 transition-colors","aria-label":"Notifications",children:[e.jsx(ze,{size:24}),r>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:r>9?"9+":r})]}),e.jsx(Nr,{isOpen:a,onClose:()=>n(!1),notifications:t,onClaimReward:c,onRefresh:u})]})},kr=()=>{const t=W(),[s,r]=o.useState(!1),{isAuthenticated:l,user:a}=se();o.useEffect(()=>{const i=m=>{m.target.closest(".user-menu-container")||r(!1)};if(s)return document.addEventListener("click",i),()=>document.removeEventListener("click",i)},[s]);const n=i=>t.pathname===i;return e.jsx("header",{className:"bg-slate-900/90 backdrop-blur-xl border-b border-ocean-500/20 sticky top-0 z-50 shadow-xl",children:e.jsx("div",{className:"container mx-auto px-3 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-18",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-ocean-500 to-treasure-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"🏴‍☠️"})}),e.jsx("h1",{className:"text-base sm:text-xl font-bold bg-gradient-to-r from-ocean-400 to-treasure-400 bg-clip-text text-transparent",children:"One Piece TCG"})]}),e.jsxs("nav",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsxs(A,{to:"/",className:`flex items-center space-x-1 sm:space-x-2 px-3 py-2 rounded-xl transition-all duration-300 font-medium ${n("/")?"bg-gradient-to-r from-ocean-500 to-ocean-600 text-white shadow-lg shadow-ocean-500/30 scale-105":"text-slate-300 hover:text-white hover:bg-slate-800/50 hover:scale-105"}`,children:[e.jsx(mr,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Accueil"})]}),e.jsxs(A,{to:"/boosters",className:`flex items-center space-x-1 sm:space-x-2 px-3 py-2 rounded-xl transition-all duration-300 font-medium ${n("/boosters")?"bg-gradient-to-r from-ocean-500 to-ocean-600 text-white shadow-lg shadow-ocean-500/30 scale-105":"text-slate-300 hover:text-white hover:bg-slate-800/50 hover:scale-105"}`,children:[e.jsx(ne,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Boosters"})]}),e.jsxs(A,{to:"/collection",className:`flex items-center space-x-1 sm:space-x-2 px-3 py-2 rounded-xl transition-all duration-300 font-medium ${n("/collection")?"bg-gradient-to-r from-ocean-500 to-ocean-600 text-white shadow-lg shadow-ocean-500/30 scale-105":"text-slate-300 hover:text-white hover:bg-slate-800/50 hover:scale-105"}`,children:[e.jsx(vt,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Collection"})]}),e.jsxs(A,{to:"/achievements",className:`flex items-center space-x-1 sm:space-x-2 px-3 py-2 rounded-xl transition-all duration-300 font-medium ${n("/achievements")?"bg-gradient-to-r from-ocean-500 to-ocean-600 text-white shadow-lg shadow-ocean-500/30 scale-105":"text-slate-300 hover:text-white hover:bg-slate-800/50 hover:scale-105"}`,children:[e.jsx(Oe,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Achievements"})]}),e.jsxs(A,{to:"/leaderboard",className:`flex items-center space-x-1 sm:space-x-2 px-3 py-2 rounded-xl transition-all duration-300 font-medium ${n("/leaderboard")?"bg-gradient-to-r from-ocean-500 to-ocean-600 text-white shadow-lg shadow-ocean-500/30 scale-105":"text-slate-300 hover:text-white hover:bg-slate-800/50 hover:scale-105"}`,children:[e.jsx(hr,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Leaderboard"})]}),l&&a?.is_admin&&e.jsxs(A,{to:"/admin",className:"flex items-center space-x-1 sm:space-x-2 px-3 py-2 rounded-xl transition-all duration-300 font-medium bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 hover:scale-105",title:"Administration",children:[e.jsx(ve,{size:18}),e.jsx("span",{className:"hidden lg:inline",children:"Admin"})]})]}),e.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Cr,{}),e.jsxs("div",{className:"relative user-menu-container",children:[e.jsxs("button",{onClick:()=>r(!s),className:"flex items-center space-x-2 px-3 py-2 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-medium transition-all duration-300 shadow-lg hover:shadow-emerald-500/40 hover:scale-105",children:[e.jsx(yr,{size:16}),e.jsx("span",{className:"hidden xs:inline",children:a?.username})]}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-72 sm:w-80 z-50",children:e.jsx(jr,{})})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(A,{to:"/login",className:"flex items-center space-x-1 px-4 py-2 rounded-xl bg-gradient-to-r from-ocean-500 to-ocean-600 hover:from-ocean-600 hover:to-ocean-700 text-white font-medium transition-all duration-300 shadow-lg hover:shadow-ocean-500/40 hover:scale-105",children:[e.jsx(xr,{size:16}),e.jsx("span",{className:"hidden xs:inline",children:"Connexion"})]}),e.jsxs(A,{to:"/register",className:"flex items-center space-x-1 px-4 py-2 rounded-xl border-2 border-ocean-400/50 text-ocean-300 hover:bg-ocean-500/10 hover:border-ocean-400 hover:text-ocean-200 transition-all duration-300 font-medium hover:scale-105",children:[e.jsx(gr,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"S'inscrire"})]})]})})]})})})},_r=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-700",children:[e.jsx(kr,{}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsx(vs,{})})]}),he=({children:t,requireAuth:s=!0,requireAdmin:r=!1})=>{const{isAuthenticated:l,user:a,isLoading:n}=se(),i=W();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-yellow-400 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Chargement..."})]})}):s&&!l?e.jsx(Le,{to:"/login",state:{from:i},replace:!0}):r&&(!l||!a?.is_admin)?e.jsx(Le,{to:"/",replace:!0}):!s&&l&&(i.pathname==="/login"||i.pathname==="/register")?e.jsx(Le,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t})};class z{static async getAllCards(){try{return(await _.getCards()).data||[]}catch(s){return console.error("Erreur lors de la récupération des cartes:",s),[]}}static async getAllBoosters(){try{return(await _.getBoosters({limit:100})).data||[]}catch(s){return console.error("Erreur lors de la récupération des boosters:",s),[]}}static async getUserCards(){try{return(await _.getUserCollection()).data||[]}catch(s){return console.error("Erreur lors de la récupération de la collection:",s),[]}}static async getBoosterStatus(){try{return(await _.getBoosterStatus()).data||{available_boosters:0,max_daily_boosters:3,next_booster_time:void 0,time_until_next:0}}catch(s){return console.error("Erreur lors de la récupération du statut des boosters:",s),{available_boosters:0,max_daily_boosters:3,next_booster_time:void 0,time_until_next:0}}}static async canOpenBooster(){return(await this.getBoosterStatus()).available_boosters>0}static async getTimeUntilNextBooster(){const s=await this.getBoosterStatus();if(!s.next_booster_time)return 0;const r=new Date,a=new Date(s.next_booster_time).getTime()-r.getTime();return Math.max(0,a)}static async openBooster(s){try{const r=await _.openBooster(s);return r.success?{cards:r.data.cards||[],new_cards:r.data.new_cards||[],available_boosters:r.data.available_boosters,next_booster_time:r.data.next_booster_time,session_info:r.data.session_info}:null}catch(r){return console.error("Erreur lors de l'ouverture du booster:",r),null}}static async toggleFavorite(s){try{await _.toggleFavorite(s)}catch(r){throw console.error("Erreur lors du basculement favori:",r),r}}static async getCollectionStats(){try{return(await _.getStats()).data||{total_cards:0,unique_cards:0,collection_completion:0,rarity_breakdown:{},booster_breakdown:{},missing_cards:0,total_available_cards:0}}catch(s){return console.error("Erreur lors de la récupération des statistiques:",s),{total_cards:0,unique_cards:0,collection_completion:0,rarity_breakdown:{},booster_breakdown:{},missing_cards:0,total_available_cards:0}}}static async searchCards(s){try{return(await _.getCards({search:s})).data||[]}catch(r){return console.error("Erreur lors de la recherche de cartes:",r),[]}}static async getCardsByBooster(s){try{return(await _.getCards({booster_id:s})).data||[]}catch(r){return console.error("Erreur lors de la récupération des cartes du booster:",r),[]}}static async getCardsByRarity(s,r){try{const l={rarity:s};return r&&(l.booster_id=r),(await _.getCards(l)).data||[]}catch(l){return console.error("Erreur lors de la récupération des cartes par rareté:",l),[]}}static async getCardById(s){try{return(await _.getCard(s)).data}catch(r){console.error("Erreur lors de la récupération de la carte:",r);return}}static async getBoosterById(s){try{return(await _.getBooster(s)).data}catch(r){console.error("Erreur lors de la récupération du booster:",r);return}}static async buyBoosterWithBerrys(){try{const s=await _.buyBoosterWithBerrys();return s.success?{cards:s.data.cards||[],new_cards:s.data.new_cards||[],available_boosters:s.data.available_boosters,next_booster_time:s.data.next_booster_time,session_info:s.data.session_info}:null}catch(s){throw console.error("Erreur lors de l'achat du booster avec des Berrys:",s),s}}static async sellCard(s,r=1){try{return(await _.sellCard(s,r)).data}catch(l){throw console.error("Erreur lors de la vente de la carte:",l),l}}static async getBerrysBalance(){try{return(await _.getBerrysBalance()).data?.berrys||0}catch(s){return console.error("Erreur lors de la récupération du solde de Berrys:",s),0}}}const Ie=({targetTime:t,onComplete:s,className:r=""})=>{const[l,a]=o.useState(0);o.useEffect(()=>{if(!t){a(0);return}const i=()=>{const u=new Date().getTime(),h=(typeof t=="string"?new Date(t):t).getTime()-u;if(h<=0){a(0),s?.();return}a(h)};i();const m=setInterval(i,1e3);return()=>clearInterval(m)},[t,s]);const n=i=>{const m=Math.floor(i/1e3),u=Math.floor(m/3600),c=Math.floor(m%3600/60),d=m%60;return u>0?`${u.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`};return l<=0||!t?null:e.jsxs("div",{className:`flex items-center space-x-2 ${r}`,children:[e.jsx(wt,{size:16,className:"text-blue-300"}),e.jsx("span",{className:"text-white font-mono text-sm",children:n(l)})]})};function Sr({isOpen:t,onClose:s,onClaim:r}){const[l,a]=o.useState(!1),[n,i]=o.useState(!1),[m,u]=o.useState(0),[c,d]=o.useState(0);o.useEffect(()=>{t||(i(!1),u(0),d(0))},[t]);const h=async()=>{try{a(!0);const x=await _.claimDailyReward();x.success&&(u(x.data.berrys_earned),d(x.data.new_balance),i(!0),r(),setTimeout(()=>{s()},3e3))}catch(x){console.error("Erreur lors de la réclamation de la récompense quotidienne:",x),alert(x.message||"Erreur lors de la réclamation de la récompense"),s()}finally{a(!1)}};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-orange-100 rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 border-4 border-yellow-500 relative animate-bounce-slow",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-800 transition",children:e.jsx(ie,{className:"w-6 h-6"})}),e.jsx("div",{className:"text-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(I,{className:"w-24 h-24 text-yellow-600 animate-spin-slow"})}),e.jsx("h2",{className:"text-3xl font-bold text-green-700 mb-4",children:"Félicitations !"}),e.jsxs("p",{className:"text-xl text-gray-800 mb-4",children:["Vous avez gagné ",e.jsxs("span",{className:"font-bold text-yellow-700",children:[m," Berrys"]})," !"]}),e.jsxs("p",{className:"text-lg text-gray-700 mb-6",children:["Nouveau solde : ",e.jsxs("span",{className:"font-bold text-yellow-700",children:[c," Berrys"]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 bg-white bg-opacity-50 rounded-lg p-3",children:[e.jsx(tt,{className:"w-5 h-5"}),e.jsx("span",{children:"Revenez demain pour une nouvelle récompense !"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(tt,{className:"w-24 h-24 text-yellow-600 animate-pulse"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Récompense Quotidienne"}),e.jsxs("p",{className:"text-lg text-gray-700 mb-6",children:["Réclamez vos ",e.jsx("span",{className:"font-bold text-yellow-700",children:"10 Berrys"})," gratuits !"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-8",children:"Connectez-vous chaque jour pour recevoir votre récompense quotidienne."}),e.jsx("button",{onClick:h,disabled:l,className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-bold py-4 px-8 rounded-lg shadow-lg hover:from-yellow-600 hover:to-orange-600 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-xl",children:l?"Réclamation...":"Réclamer 10 Berrys"})]})})]})}):null}const Z=({children:t,variant:s="primary",size:r="md",isLoading:l=!1,leftIcon:a,rightIcon:n,className:i="",disabled:m,...u})=>{const c="inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900",d={primary:"bg-gradient-to-r from-ocean-500 to-ocean-600 hover:from-ocean-600 hover:to-ocean-700 text-white shadow-lg hover:shadow-glow-lg focus:ring-ocean-500 active:scale-95",secondary:"bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white shadow-lg hover:shadow-xl focus:ring-slate-500 active:scale-95",danger:"bg-gradient-to-r from-danger-500 to-danger-600 hover:from-danger-600 hover:to-danger-700 text-white shadow-lg hover:shadow-xl focus:ring-danger-500 active:scale-95",treasure:"bg-gradient-to-r from-treasure-500 to-treasure-600 hover:from-treasure-600 hover:to-treasure-700 text-white shadow-lg shadow-treasure hover:shadow-treasure focus:ring-treasure-500 active:scale-95",ghost:"bg-transparent hover:bg-white/10 text-white border-2 border-white/20 hover:border-white/40 active:scale-95"},h={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-6 py-3 text-base gap-2",lg:"px-8 py-4 text-lg gap-3"};return e.jsx("button",{className:`${c} ${d[s]} ${h[r]} ${i}`,disabled:m||l,...u,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Chargement..."})]}):e.jsxs(e.Fragment,{children:[a&&e.jsx("span",{className:"flex-shrink-0",children:a}),t,n&&e.jsx("span",{className:"flex-shrink-0",children:n})]})})},le=({children:t,variant:s="default",className:r="",hover:l=!0,glow:a=!1})=>{const n="relative backdrop-blur-md rounded-2xl border transition-all duration-300",i={default:"bg-slate-800/40 border-slate-700/50 hover:border-slate-600/60",ocean:"bg-gradient-to-br from-ocean-500/20 to-ocean-600/20 border-ocean-400/30 hover:border-ocean-400/60",treasure:"bg-gradient-to-br from-treasure-500/20 to-treasure-600/20 border-treasure-400/30 hover:border-treasure-400/60",danger:"bg-gradient-to-br from-danger-500/20 to-danger-600/20 border-danger-400/30 hover:border-danger-400/60",success:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/20 border-emerald-400/30 hover:border-emerald-400/60"},m=l?"hover:scale-[1.02] hover:shadow-2xl":"",u=a?"shadow-glow-lg":"shadow-xl";return e.jsxs("div",{className:`group ${n} ${i[s]} ${m} ${u} ${r}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),e.jsx("div",{className:"relative",children:t})]})},Rr=({value:t,max:s=100,variant:r="ocean",size:l="md",showLabel:a=!1,label:n,animated:i=!0})=>{const m=Math.min(t/s*100,100),u={ocean:"from-ocean-500 to-ocean-600",treasure:"from-treasure-500 to-treasure-600",success:"from-emerald-500 to-emerald-600",danger:"from-danger-500 to-danger-600"},c={sm:"h-1.5",md:"h-2.5",lg:"h-4"};return e.jsxs("div",{className:"w-full",children:[(a||n)&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n&&e.jsx("span",{className:"text-sm text-slate-300 font-medium",children:n}),a&&e.jsxs("span",{className:"text-sm text-white font-bold",children:[Math.round(m),"%"]})]}),e.jsx("div",{className:`w-full bg-slate-700/50 rounded-full overflow-hidden ${c[l]}`,children:e.jsx("div",{className:`h-full bg-gradient-to-r ${u[r]} ${i?"transition-all duration-1000 ease-out":""} shadow-lg`,style:{width:`${m}%`},children:i&&l==="lg"&&e.jsx("div",{className:"h-full w-full bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})})})]})},Er=()=>{const[t,s]=o.useState(null),[r,l]=o.useState(null),[a,n]=o.useState({total_cards:0,unique_cards:0,collection_completion:0,rarity_breakdown:{common:0,uncommon:0,rare:0,super_rare:0,secret_rare:0}}),[i,m]=o.useState(!0),[u,c]=o.useState(!1),[d,h]=o.useState(!1),[x,g]=o.useState(null),w=()=>{const S=localStorage.getItem("dailyRewardModalLastShown");if(!S)return!1;const R=new Date().toISOString().split("T")[0],L=new Date(S).toISOString().split("T")[0];return R===L},y=()=>{localStorage.setItem("dailyRewardModalLastShown",new Date().toISOString())},v=async()=>{try{const S=await _.checkDailyReward();return S.success?(h(S.data.is_available),g(S.data),S.data.is_available):!1}catch(S){return console.error("Erreur lors de la vérification de la récompense quotidienne:",S),!1}},p=()=>{d&&(c(!0),y())};o.useEffect(()=>{(async()=>{m(!0);try{const[R,L]=await Promise.all([z.getBoosterStatus(),z.getCollectionStats()]);l(R),n(L),await v()&&!w()&&(c(!0),y())}catch(R){console.error("Error loading home data:",R)}finally{m(!1)}})()},[]),o.useEffect(()=>{if(!r?.next_booster_time)return;const S=setInterval(()=>{const R=Date.now(),L=new Date(r.next_booster_time).getTime();R>=L&&r.available_boosters<r.max_daily_boosters&&l(P=>{if(!P)return P;const $=Math.min(P.available_boosters+1,P.max_daily_boosters);let T;return $<P.max_daily_boosters&&(T=new Date(L+480*60*1e3)),{...P,available_boosters:$,next_booster_time:T,time_until_next:T?T.getTime()-R:0}})},1e3);return()=>clearInterval(S)},[r?.next_booster_time]);const f=r?r.available_boosters>0:!1,j=r?.next_booster_time?Math.max(0,new Date(r.next_booster_time).getTime()-new Date().getTime()):0;return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsx(Sr,{isOpen:u,onClose:()=>c(!1),onClaim:async()=>{h(!1),await z.getCollectionStats().then(n),await v()}}),e.jsxs("section",{className:"text-center px-2 py-8",children:[e.jsx("div",{className:"text-6xl mb-4 animate-float",children:"🏴‍☠️"}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-4 bg-gradient-to-r from-ocean-400 via-treasure-400 to-ocean-400 bg-clip-text text-transparent",children:"Bienvenue sur One Piece TCG!"}),e.jsx("p",{className:"text-slate-300 text-base sm:text-lg md:text-xl max-w-2xl mx-auto",children:"Explorez les mers de Grand Line et collectionnez les cartes légendaires !"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs(le,{variant:"treasure",className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-treasure-500/20 rounded-xl",children:e.jsx(ye,{className:"text-treasure-300",size:24})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Récompense"})]}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center items-center text-5xl mb-2 animate-bounce",children:"🎁"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-amber-200 text-sm mb-2 font-medium",children:"Récompense disponible !"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(I,{className:"text-amber-400",size:24}),e.jsx("p",{className:"text-white font-bold text-2xl",children:"10"})]})]}),e.jsx(Z,{onClick:p,variant:"treasure",className:"w-full",children:"Réclamer maintenant"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center items-center text-4xl mb-2 opacity-40",children:"✓"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-300 text-sm mb-2",children:"Déjà réclamée aujourd'hui"}),e.jsx("p",{className:"text-slate-400 text-xs mb-3",children:"Revenez demain !"})]}),e.jsx(Z,{disabled:!0,variant:"secondary",className:"w-full",children:"Indisponible"})]})})]}),e.jsxs(le,{variant:"ocean",className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-ocean-500/20 rounded-xl",children:e.jsx(ne,{className:"text-ocean-300",size:24})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Boosters"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"Disponibles"}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(r?.max_daily_boosters||3)].map((S,R)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${R<(r?.available_boosters||0)?"bg-blue-400 shadow-lg shadow-blue-400/50":"bg-slate-600"}`},R))})]}),j>0&&r?.next_booster_time&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Prochain dans"}),e.jsx(Ie,{targetTime:r.next_booster_time,className:"text-sm font-semibold text-blue-300"})]}),e.jsx(A,{to:"/boosters",className:"block w-full",children:e.jsx(Z,{variant:f?"primary":"secondary",disabled:!f,className:"w-full",children:f?"🎲 Ouvrir Booster":"Indisponible"})})]})]}),e.jsxs(le,{variant:"success",className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:e.jsx(vt,{className:"text-emerald-300",size:24})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Collection"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Rr,{value:a.collection_completion,variant:"success",showLabel:!0,label:"Progression"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:a.unique_cards}),e.jsx("p",{className:"text-xs text-slate-400",children:"Uniques"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:a.total_cards}),e.jsx("p",{className:"text-xs text-slate-400",children:"Total"})]})]}),e.jsx(A,{to:"/collection",className:"block w-full",children:e.jsx(Z,{variant:"primary",className:"w-full",children:"📚 Voir Collection"})})]})]}),e.jsxs(le,{variant:"default",className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-xl",children:e.jsx(De,{className:"text-purple-300",size:24})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Statistiques"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-slate-300 text-xs font-medium",children:"Répartition par rareté"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-xs",children:"Communes"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-slate-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-slate-400",style:{width:`${Math.min((a.rarity_breakdown?.common||0)/10,100)}%`}})}),e.jsx("span",{className:"text-white text-sm font-semibold w-6",children:a.rarity_breakdown?.common||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-emerald-400 text-xs",children:"P. Communes"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-slate-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400",style:{width:`${Math.min((a.rarity_breakdown?.uncommon||0)/10,100)}%`}})}),e.jsx("span",{className:"text-white text-sm font-semibold w-6",children:a.rarity_breakdown?.uncommon||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-400 text-xs",children:"Rares"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-slate-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-400",style:{width:`${Math.min((a.rarity_breakdown?.rare||0)/5,100)}%`}})}),e.jsx("span",{className:"text-white text-sm font-semibold w-6",children:a.rarity_breakdown?.rare||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-400 text-xs",children:"S. Rares"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-slate-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-400",style:{width:`${Math.min((a.rarity_breakdown?.super_rare||0)/3,100)}%`}})}),e.jsx("span",{className:"text-white text-sm font-semibold w-6",children:a.rarity_breakdown?.super_rare||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-amber-400 text-xs",children:"Secrètes"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-slate-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-400",style:{width:`${Math.min((a.rarity_breakdown?.secret_rare||0)/2,100)}%`}})}),e.jsx("span",{className:"text-white text-sm font-semibold w-6",children:a.rarity_breakdown?.secret_rare||0})]})]})]})]})]})]}),e.jsx("section",{className:"text-center py-12 px-4",children:e.jsxs(le,{variant:"ocean",className:"p-8 max-w-3xl mx-auto",glow:!0,children:[e.jsx("div",{className:"text-5xl sm:text-6xl mb-4 animate-float",children:"⚓"}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3",children:"Prêt pour l'aventure ?"}),e.jsx("p",{className:"text-slate-300 text-base sm:text-lg mb-6 max-w-xl mx-auto",children:"Ouvrez des boosters pour agrandir votre collection de cartes légendaires !"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(A,{to:"/boosters",children:e.jsx(Z,{variant:f?"treasure":"secondary",disabled:!f,size:"lg",children:f?"🎲 Ouvrir un Booster!":"Patience, moussaillon..."})}),e.jsx(A,{to:"/collection",children:e.jsx(Z,{variant:"primary",size:"lg",children:"📚 Voir ma Collection"})})]})]})})]})},Lr={common:10,uncommon:25,rare:50,super_rare:150,secret_rare:500},K=100,Nt={common:"from-gray-400 to-gray-600",uncommon:"from-green-400 to-green-600",rare:"from-blue-400 to-blue-600",super_rare:"from-purple-400 to-purple-600",secret_rare:"from-yellow-400 to-orange-500"},J={common:"Commune",uncommon:"Peu Commune",rare:"Rare",super_rare:"Super Rare",secret_rare:"Secrète Rare"},Fe=({card:t,quantity:s=1,isNew:r=!1,isFavorite:l=!1,onToggleFavorite:a,onCardClick:n,showStats:i=!0,className:m=""})=>{const u=`card-${t.rarity.replace("_","-")}`,c=d=>{d.target.closest("button")||n&&n(t)};return e.jsxs("div",{className:`relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer ${u} ${m}`,onClick:c,children:[r&&e.jsx("div",{className:"absolute -top-1 sm:-top-2 -right-1 sm:-right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold animate-bounce-in z-10",children:"NOUVEAU!"}),s!==void 0&&e.jsxs("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 bg-black/80 text-white text-xs sm:text-sm px-2 sm:px-3 py-1 rounded-full font-bold z-10",children:["x",s]}),a&&e.jsx("button",{onClick:a,className:"absolute top-2 sm:top-3 right-2 sm:right-3 p-1.5 sm:p-2 rounded-full bg-black/60 hover:bg-black/80 transition-colors z-10",children:e.jsx(jt,{size:16,className:l?"fill-red-500 text-red-500":"text-white"})}),e.jsxs("div",{className:"w-full aspect-[2.5/3.5] relative overflow-hidden bg-gray-800",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,loading:"lazy",decoding:"async",className:"w-full h-full object-cover",style:{contentVisibility:"auto",willChange:"transform"},onError:d=>{const h=d.target;t.fallback_image_url&&h.src!==t.fallback_image_url?h.src=t.fallback_image_url:(h.style.display="none",h.nextElementSibling?.classList.remove("hidden"))}}):null,e.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center text-white/80 bg-gradient-to-br ${Nt[t.rarity]} ${t.image_url?"hidden":""}`,children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-2 sm:mb-4",children:"🏴‍☠️"}),e.jsx("div",{className:"text-sm sm:text-lg font-bold text-center px-2 sm:px-4",children:t.character}),e.jsx("div",{className:"text-xs sm:text-sm mt-1 sm:mt-2",children:J[t.rarity]}),t.image_url&&e.jsx("div",{className:"text-xs mt-1 sm:mt-2 text-red-400",children:"Image indisponible"})]})]}),e.jsxs("div",{className:"p-2 sm:p-4 bg-gradient-to-br from-gray-800 to-gray-900",children:[e.jsxs("div",{className:"text-center mb-2 sm:mb-3",children:[e.jsx("h3",{className:"font-bold text-white text-sm sm:text-lg leading-tight mb-1",children:t.name}),e.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:t.character}),e.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-1 sm:gap-2 text-xs mt-1 sm:mt-2",children:[e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 sm:py-1 rounded font-medium text-xs ${t.rarity==="secret_rare"?"bg-purple-600 text-white":t.rarity==="super_rare"?"bg-yellow-600 text-white":t.rarity==="rare"?"bg-blue-600 text-white":t.rarity==="uncommon"?"bg-green-600 text-white":"bg-gray-600 text-white"}`,children:J[t.rarity]}),t.type&&e.jsx("span",{className:"bg-gray-700 text-white/90 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-xs",children:t.type})]}),t.color&&t.color.length>0&&e.jsx("div",{className:"flex justify-center flex-wrap gap-1 mt-1 sm:mt-2",children:t.color.map((d,h)=>e.jsx("span",{className:`text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded font-medium ${d==="Red"?"bg-red-600 text-white":d==="Blue"?"bg-blue-600 text-white":d==="Green"?"bg-green-600 text-white":d==="Yellow"?"bg-yellow-600 text-white":d==="Purple"?"bg-purple-600 text-white":d==="Black"?"bg-gray-800 text-white":d==="White"?"bg-gray-200 text-gray-800":"bg-gray-600 text-white"}`,children:d},h))})]}),i&&e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[(t.cost!==void 0||t.power!==void 0||t.counter!==void 0)&&e.jsxs("div",{className:"grid grid-cols-3 gap-1.5 sm:gap-3 text-center",children:[t.cost!==void 0&&e.jsxs("div",{className:"bg-gray-700/50 rounded p-1 sm:p-2",children:[e.jsx("div",{className:"text-white/60 text-xs font-medium",children:"COST"}),e.jsx("div",{className:"text-white font-bold text-sm sm:text-lg",children:t.cost})]}),t.power!==void 0&&e.jsxs("div",{className:"bg-gray-700/50 rounded p-1 sm:p-2",children:[e.jsx("div",{className:"text-white/60 text-xs font-medium",children:"PWR"}),e.jsx("div",{className:"text-white font-bold text-sm sm:text-lg",children:t.power})]}),t.counter!==void 0&&e.jsxs("div",{className:"bg-gray-700/50 rounded p-1 sm:p-2",children:[e.jsx("div",{className:"text-white/60 text-xs font-medium",children:"CTR"}),e.jsx("div",{className:"text-white font-bold text-sm sm:text-lg",children:t.counter})]})]}),!(t.cost!==void 0||t.power!==void 0||t.counter!==void 0)&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2 bg-gray-700/50 rounded p-1.5 sm:p-2",children:[e.jsx(br,{size:14,className:"text-red-400"}),e.jsx("span",{className:"text-white font-bold text-sm sm:text-base",children:t.power||t.attack})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2 bg-gray-700/50 rounded p-1.5 sm:p-2",children:[e.jsx(ve,{size:14,className:"text-blue-400"}),e.jsx("span",{className:"text-white font-bold text-sm sm:text-base",children:t.counter||t.defense})]})]})]}),t.description&&e.jsx("div",{className:"mt-2 sm:mt-3 p-2 sm:p-3 bg-gray-700/30 rounded text-white/90 text-xs leading-relaxed line-clamp-3",children:t.description}),t.special_ability&&e.jsxs("div",{className:"mt-2 sm:mt-3 p-2 sm:p-3 bg-yellow-900/30 border border-yellow-600/30 rounded",children:[e.jsx("div",{className:"text-yellow-400 font-semibold text-xs mb-1",children:"🌟 SPÉCIAL"}),e.jsx("div",{className:"text-white/90 text-xs leading-relaxed line-clamp-2",children:t.special_ability})]})]})]})},Ct=({card:t,isOpen:s,onClose:r,isFavorite:l=!1,onToggleFavorite:a,quantity:n=1})=>{const[i,m]=o.useState(0),[u,c]=o.useState(0),[d,h]=o.useState(!1),x=o.useRef(null);if(o.useEffect(()=>{s&&(m(0),c(0),h(!1))},[s]),!s)return null;const g=f=>{if(!x.current)return;const j=x.current.getBoundingClientRect(),S=j.left+j.width/2,R=j.top+j.height/2,L=15,P=(f.clientY-R)/(j.height/2)*L,$=(f.clientX-S)/(j.width/2)*-L;m(P),c($)},w=()=>{m(0),c(0)},y=()=>{h(!0)},v=()=>{h(!1),setTimeout(()=>{w()},100)},p=`perspective(1000px) rotateX(${i}deg) rotateY(${u}deg) scale(${d?1.05:1})`;return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:f=>{f.target===f.currentTarget&&r()},children:e.jsxs("div",{className:"relative max-w-4xl w-full bg-gray-900 rounded-2xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-full bg-gray-800 hover:bg-gray-700 transition-colors z-10",children:e.jsx(ie,{size:24,className:"text-white"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:x,className:"relative w-full max-w-md mx-auto transition-transform duration-300 ease-out",style:{transform:p},onMouseMove:g,onMouseEnter:y,onMouseLeave:v,children:e.jsxs("div",{className:`relative aspect-[2.5/3.5] rounded-xl overflow-hidden shadow-2xl card-${t.rarity.replace("_","-")}`,children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-cover",onError:f=>{const j=f.target;t.fallback_image_url&&j.src!==t.fallback_image_url?j.src=t.fallback_image_url:(j.style.display="none",j.nextElementSibling?.classList.remove("hidden"))}}):null,e.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center text-white/80 bg-gradient-to-br ${Nt[t.rarity]} ${t.image_url?"hidden":""}`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏴‍☠️"}),e.jsx("div",{className:"text-lg font-bold text-center px-4",children:t.character}),e.jsx("div",{className:"text-sm mt-2",children:J[t.rarity]}),t.image_url&&e.jsx("div",{className:"text-xs mt-2 text-red-400",children:"Image indisponible"})]}),(t.rarity==="super_rare"||t.rarity==="secret_rare")&&e.jsx("div",{className:"absolute -inset-2 ring-4 ring-yellow-400 ring-opacity-50 rounded-xl pointer-events-none animate-pulse"})]})}),n>1&&e.jsxs("div",{className:"absolute top-4 left-4 bg-black/80 text-white text-lg px-4 py-2 rounded-full font-bold",children:["x",n]}),a&&e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-3 rounded-full bg-black/60 hover:bg-black/80 transition-colors",children:e.jsx(jt,{size:24,className:l?"fill-red-500 text-red-500":"text-white"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:t.name}),e.jsx("p",{className:"text-xl text-white/80 mb-4",children:t.character}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.rarity==="secret_rare"?"bg-purple-600 text-white":t.rarity==="super_rare"?"bg-yellow-600 text-white":t.rarity==="rare"?"bg-blue-600 text-white":t.rarity==="uncommon"?"bg-green-600 text-white":"bg-gray-600 text-white"}`,children:J[t.rarity]}),t.type&&e.jsx("span",{className:"bg-gray-700 text-white/90 px-3 py-1 rounded-full text-sm",children:t.type})]}),t.color&&t.color.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.color.map((f,j)=>e.jsx("span",{className:`text-sm px-3 py-1 rounded-full font-medium ${f==="Red"?"bg-red-600 text-white":f==="Blue"?"bg-blue-600 text-white":f==="Green"?"bg-green-600 text-white":f==="Yellow"?"bg-yellow-600 text-white":f==="Purple"?"bg-purple-600 text-white":f==="Black"?"bg-gray-800 text-white":f==="White"?"bg-gray-200 text-gray-800":"bg-gray-600 text-white"}`,children:f},j))})]}),(t.cost!==void 0||t.power!==void 0||t.counter!==void 0)&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.cost!==void 0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-white/60 text-sm font-medium mb-1",children:"COST"}),e.jsx("div",{className:"text-white font-bold text-2xl",children:t.cost})]}),t.power!==void 0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-white/60 text-sm font-medium mb-1",children:"POWER"}),e.jsx("div",{className:"text-white font-bold text-2xl",children:t.power})]}),t.counter!==void 0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-white/60 text-sm font-medium mb-1",children:"COUNTER"}),e.jsx("div",{className:"text-white font-bold text-2xl",children:t.counter})]})]}),t.description&&e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-white/90 leading-relaxed",children:t.description})]}),t.special_ability&&e.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-600/30 rounded-lg p-4",children:[e.jsx("h3",{className:"text-yellow-400 font-semibold mb-2 flex items-center gap-2",children:"🌟 Capacité Spéciale"}),e.jsx("p",{className:"text-white/90 leading-relaxed",children:t.special_ability})]})]})]})]})})},Te=o.lazy(()=>St(()=>import("./ChestAnimation3D-nlqAGILL.js"),__vite__mapDeps([0,1,2]))),Br=()=>{const[t,s]=o.useState("idle"),[r,l]=o.useState(null),[a,n]=o.useState(0),[i,m]=o.useState(!1),[u,c]=o.useState(0),[d,h]=o.useState(null),[x,g]=o.useState(null),[w,y]=o.useState(0),[v,p]=o.useState([]),[f,j]=o.useState(!0),[S,R]=o.useState(null),[L,P]=o.useState(!1),[$,T]=o.useState(0);o.useEffect(()=>{(async()=>{j(!0);try{const[b,C,k]=await Promise.all([z.getAllBoosters(),z.getBoosterStatus(),z.getBerrysBalance()]);if(p(b),b.length>0&&g(b[0]),h(C),m(C.available_boosters>0),T(k),C.next_booster_time){const M=new Date,F=new Date(C.next_booster_time);c(Math.max(0,F.getTime()-M.getTime()))}else c(0)}catch(b){console.error("Error loading data:",b)}finally{j(!1)}})()},[]),o.useEffect(()=>{if(!d?.next_booster_time)return;const N=setInterval(()=>{const b=Date.now(),C=new Date(d.next_booster_time).getTime();c(Math.max(0,C-b)),b>=C&&d.available_boosters<d.max_daily_boosters&&h(k=>{if(!k)return k;const M=Math.min(k.available_boosters+1,k.max_daily_boosters);let F;return M<k.max_daily_boosters&&(F=new Date(C+480*60*1e3)),m(M>0),{...k,available_boosters:M,next_booster_time:F}})},1e3);return()=>clearInterval(N)},[d?.next_booster_time]);const O=async()=>{!i||t!=="idle"||!x||(s("opening"),setTimeout(async()=>{const N=await z.openBooster(x.id);N&&(l(N),s("deck"),n(0),N.available_boosters!==void 0&&(h(b=>b?{...b,available_boosters:N.available_boosters,next_booster_time:N.next_booster_time?new Date(N.next_booster_time):void 0}:null),m(N.available_boosters>0)))},2e3))},D=()=>{s("complete")},Ne=()=>{s("idle"),l(null),n(0)},Ce=()=>{const N=(w+1)%v.length;y(N),g(v[N])},me=()=>{const N=w===0?v.length-1:w-1;y(N),g(v[N])},ke=N=>{R(N),P(!0)},_e=()=>{P(!1),R(null)},re=async()=>{t!=="idle"||!x||$<K||confirm(`Voulez-vous acheter un booster pour ${K} Berrys ?`)&&(s("opening"),setTimeout(async()=>{try{const N=await z.buyBoosterWithBerrys();if(N){l(N),s("deck"),n(0);const b=await z.getBerrysBalance();T(b),N.available_boosters!==void 0&&(h(C=>C?{...C,available_boosters:N.available_boosters,next_booster_time:N.next_booster_time?new Date(N.next_booster_time):void 0}:null),m(N.available_boosters>0))}}catch(N){alert(N.message||"Erreur lors de l'achat du booster"),s("idle")}},2e3))};return f?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),e.jsx("div",{className:"text-white text-xl",children:"Chargement..."})]})}):e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs(A,{to:"/",className:"flex items-center space-x-2 text-blue-300 hover:text-white transition-colors text-sm sm:text-base",children:[e.jsx(yt,{size:18}),e.jsx("span",{children:"Retour à l'accueil"})]}),e.jsxs("div",{className:"text-left sm:text-right w-full sm:w-auto",children:[e.jsxs("div",{className:"text-white font-semibold text-sm sm:text-base",children:["Boosters: ",d?.available_boosters||0,"/3"]}),e.jsxs("div",{className:"text-yellow-400 font-semibold flex items-center sm:justify-end gap-1 mt-1 text-sm sm:text-base",children:[e.jsx(I,{size:16}),$," Berrys"]}),u>0&&d&&e.jsx(Ie,{targetTime:d.next_booster_time||null,className:"sm:justify-end text-xs sm:text-sm"})]})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-3 sm:mb-4",children:"Ouvrir un Booster Pack"}),e.jsx("p",{className:"text-blue-200 text-sm sm:text-base mb-4 sm:mb-6",children:"Chaque booster contient 5 cartes avec au moins 1 carte rare !"}),e.jsxs("div",{className:"bg-blue-800/40 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-blue-600/30 mb-6 sm:mb-8 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("button",{onClick:me,className:"p-1 sm:p-2 text-blue-300 hover:text-white transition-colors shrink-0",disabled:t!=="idle",children:e.jsx(ir,{size:20})}),e.jsx("div",{className:"text-center flex-1 min-w-0",children:f?e.jsxs("div",{className:"animate-pulse px-2",children:[e.jsx("div",{className:"h-5 sm:h-6 bg-blue-600 rounded mb-2"}),e.jsx("div",{className:"h-3 sm:h-4 bg-blue-700 rounded mb-2"}),e.jsx("div",{className:"h-3 sm:h-4 bg-blue-700 rounded mb-3"}),e.jsx("div",{className:"h-2 sm:h-3 bg-blue-800 rounded"})]}):x?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-base sm:text-xl font-bold text-white mb-1 sm:mb-2 truncate px-2",children:x.name}),e.jsxs("div",{className:"text-xs sm:text-sm text-blue-200 mb-1 sm:mb-2",children:[e.jsx("span",{className:"font-semibold",children:x.code})," • ",x.series]}),e.jsx("p",{className:"text-xs sm:text-sm text-blue-300 mb-2 sm:mb-3 line-clamp-2 px-2",children:x.description}),e.jsxs("div",{className:"text-xs text-blue-400",children:[x.cardCount," cartes • ",new Date(x.releaseDate).toLocaleDateString("fr-FR")]})]}):e.jsx("div",{className:"text-red-400 text-sm",children:"Erreur de chargement"})}),e.jsx("button",{onClick:Ce,className:"p-1 sm:p-2 text-blue-300 hover:text-white transition-colors shrink-0",disabled:t!=="idle",children:e.jsx(cr,{size:20})})]}),e.jsx("div",{className:"flex justify-center mt-3 sm:mt-4 space-x-1",children:v.map((N,b)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${b===w?"bg-blue-400":"bg-blue-700"}`},b))})]})]}),t==="idle"&&e.jsxs("div",{className:"text-center space-y-6 sm:space-y-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"text-white text-center py-20",children:"Chargement du coffre 3D..."}),children:e.jsx(Te,{isOpening:!1,animationPhase:t,onClick:O})})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 px-4",children:[e.jsx("button",{onClick:O,disabled:!i,className:`text-sm sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-lg font-bold transition-all w-full sm:w-auto ${i?"btn-primary hover:scale-105":"btn-disabled cursor-not-allowed"}`,children:i?e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx(st,{size:18}),e.jsx("span",{children:"Ouvrir le Booster gratuit!"}),e.jsx(st,{size:18})]}):"Booster gratuit indisponible"}),!i&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-blue-300 mb-2 text-sm sm:text-base",children:"ou"}),e.jsxs("button",{onClick:re,disabled:$<K,className:`text-sm sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-lg font-bold transition-all flex items-center justify-center gap-2 w-full sm:w-auto sm:mx-auto ${$>=K?"bg-yellow-600 hover:bg-yellow-700 text-white hover:scale-105":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(I,{size:18}),e.jsxs("span",{children:["Acheter (",K," Berrys)"]})]}),$<K&&e.jsxs("p",{className:"text-red-400 text-xs sm:text-sm mt-2",children:["Besoin de ",K-$," Berrys de plus"]})]}),!i&&u>0&&d&&e.jsxs("p",{className:"text-blue-300 text-xs sm:text-sm",children:["Prochain booster gratuit dans"," ",e.jsx(Ie,{targetTime:d.next_booster_time||null})]})]})]}),t==="opening"&&e.jsxs("div",{className:"text-center space-y-8",children:[e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"text-white text-center py-20",children:"Chargement..."}),children:e.jsx(Te,{isOpening:!0,animationPhase:t,onClick:()=>{}})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white animate-pulse",children:"Ouverture en cours..."}),e.jsx("div",{className:"text-blue-300",children:"La magie de Grand Line opère... ✨"})]})]}),t==="deck"&&r&&e.jsxs("div",{className:"w-full max-w-6xl mx-auto px-2",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3 sm:mb-4",children:"🃏 Vos cartes sortent du coffre !"}),e.jsx("div",{className:"text-blue-300 text-sm sm:text-base",children:r.new_cards.length>0&&e.jsxs("p",{children:[r.new_cards.length," nouvelle(s) carte(s) ajoutée(s) !"]})})]}),e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"text-white text-center py-20",children:"Chargement..."}),children:e.jsx(Te,{isOpening:!0,animationPhase:t,cards:r.cards,onAnimationComplete:D,onClick:()=>{}})}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:D,className:"btn-primary text-sm sm:text-base px-6 py-3",children:"Voir le résumé →"})})]}),t==="complete"&&r&&e.jsxs("div",{className:"space-y-6 sm:space-y-8 px-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-3 sm:mb-4",children:"🎉"}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3 sm:mb-4",children:"Félicitations !"}),e.jsx("div",{className:"text-blue-300 text-base sm:text-lg mb-2",children:"Vous avez révélé toutes vos cartes !"}),r.new_cards.length>0&&e.jsxs("div",{className:"text-green-400 font-semibold text-sm sm:text-base",children:[r.new_cards.length," nouvelle(s) carte(s) ajoutée(s) !"]})]}),e.jsxs("div",{className:"bg-blue-800/40 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-blue-600/30 max-w-4xl mx-auto",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-4 sm:mb-6 text-center",children:"🃏 Vos cartes obtenues"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 sm:gap-4",children:r.cards.map((N,b)=>e.jsxs("div",{className:"relative group",children:[e.jsx(Fe,{card:N,showStats:!1,onCardClick:ke,className:"cursor-pointer hover:scale-105 transition-transform"}),r.new_cards.includes(N.id)&&e.jsx("div",{className:"absolute top-1 right-1 bg-green-500 text-white text-xs px-1.5 py-0.5 rounded-full font-bold shadow-lg",children:"NEW"})]},`summary-${N.id}-${b}`))}),e.jsxs("div",{className:"mt-6 border-t border-blue-600/30 pt-4",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-white mb-3 text-center",children:"📊 Résumé des raretés"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2 sm:gap-3 text-center text-xs sm:text-sm",children:Object.entries(r.cards.reduce((N,b)=>(N[b.rarity]=(N[b.rarity]||0)+1,N),{})).map(([N,b])=>e.jsxs("div",{className:"p-2 bg-blue-700/30 rounded-lg",children:[e.jsxs("div",{className:"text-white font-bold",children:[b,"x"]}),e.jsx("div",{className:`${N==="secret_rare"?"text-yellow-300":N==="super_rare"?"text-purple-300":N==="rare"?"text-blue-300":N==="uncommon"?"text-green-300":"text-gray-300"}`,children:N==="secret_rare"?"Secrète":N==="super_rare"?"Super":N==="rare"?"Rare":N==="uncommon"?"Peu Com.":"Commune"})]},N))})]})]}),e.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center px-4",children:[e.jsx("button",{onClick:Ne,className:"btn-primary text-sm sm:text-lg px-6 sm:px-8 py-3 sm:py-4",children:i?"🎲 Ouvrir un autre":"← Retour"}),e.jsx(A,{to:"/collection",className:"inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-lg transition-colors text-sm sm:text-lg",children:"📚 Voir collection"})]}),e.jsx("div",{className:"text-blue-300 text-xs sm:text-sm",children:"Cartes ajoutées à votre collection"})]})]}),e.jsxs("div",{className:"bg-blue-800/40 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-blue-600/30",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4",children:"🎯 Taux de drop"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-300",children:"Commune"}),e.jsx("div",{className:"text-white font-bold",children:"60%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-300",children:"Peu Commune"}),e.jsx("div",{className:"text-white font-bold",children:"25%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-blue-300",children:"Rare"}),e.jsx("div",{className:"text-white font-bold",children:"10%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-purple-300",children:"Super Rare"}),e.jsx("div",{className:"text-white font-bold",children:"4%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-yellow-300",children:"Secrète Rare"}),e.jsx("div",{className:"text-white font-bold",children:"1%"})]})]})]}),L&&S&&e.jsx(Ct,{card:S,isOpen:L,onClose:_e})]})},Ae=20,$r=()=>{const[t,s]=o.useState([]),[r,l]=o.useState([]),[a,n]=o.useState(""),[i,m]=o.useState("all"),[u,c]=o.useState(!1),[d,h]=o.useState(null),[x,g]=o.useState([]),[w,y]=o.useState(!0),[v,p]=o.useState(null),[f,j]=o.useState(!1),[S,R]=o.useState(0),[L,P]=o.useState(!1),[$,T]=o.useState(Ae),O=o.useRef(null);o.useEffect(()=>{(async()=>{y(!0);try{const[C,k,M,F,X]=await Promise.all([z.getUserCards(),z.getAllCards(),z.getCollectionStats(),z.getAllBoosters(),z.getBerrysBalance()]);s(C),l(k),h(M),g(F),R(X)}catch(C){console.error("Error loading collection data:",C)}finally{y(!1)}})()},[]);const D=o.useMemo(()=>{t.map(C=>C.card_id);let b=r;if(a.trim()){const C=a.toLowerCase();b=b.filter(k=>k.name.toLowerCase().includes(C)||k.character.toLowerCase().includes(C)||k.description.toLowerCase().includes(C)||k.type&&k.type.toLowerCase().includes(C)||k.color&&k.color.some(M=>M.toLowerCase().includes(C))||k.booster_id&&k.booster_id.toLowerCase().includes(C))}if(i!=="all")if(i==="favorites"){const C=t.filter(k=>k.is_favorite).map(k=>k.card_id);b=b.filter(k=>C.includes(k.id))}else["common","uncommon","rare","super_rare","secret_rare"].includes(i)?b=b.filter(C=>C.rarity===i):b=b.filter(C=>C.booster_id===i);return b.sort((C,k)=>{const M=t.find(Se=>Se.card_id===C.id),F=t.find(Se=>Se.card_id===k.id);if(M&&!F)return-1;if(!M&&F)return 1;const X=["secret_rare","super_rare","rare","uncommon","common"];return X.indexOf(C.rarity)-X.indexOf(k.rarity)})},[r,t,a,i]);o.useEffect(()=>{T(Ae)},[a,i]),o.useEffect(()=>{const b=new IntersectionObserver(k=>{k[0].isIntersecting&&$<D.length&&T(M=>Math.min(M+Ae,D.length))},{threshold:.1}),C=O.current;return C&&b.observe(C),()=>{C&&b.unobserve(C)}},[$,D.length]);const Ne=o.useMemo(()=>D.slice(0,$),[D,$]),Ce=async b=>{try{await z.toggleFavorite(b);const C=await z.getUserCards();s(C)}catch(C){console.error("Erreur lors du basculement favori:",C)}},me=b=>{p(b),j(!0)},ke=()=>{j(!1),p(null)},_e=async(b,C=1)=>{try{const k=await z.sellCard(b,C);R(k.new_balance);const M=await z.getUserCards();s(M),alert(`Carte vendue ! Vous avez gagné ${k.berrys_earned} Berrys. Nouveau solde : ${k.new_balance} Berrys`)}catch(k){console.error("Erreur lors de la vente de la carte:",k),alert(k.message||"Impossible de vendre cette carte")}},re=()=>{n(""),m("all"),c(!1)},N=[{value:"all",label:"Toutes",count:r.length,category:"général"},{value:"favorites",label:"Favoris",count:t.filter(b=>b.is_favorite).length,category:"général"},{value:"common",label:J.common,count:d?.rarity_breakdown?.common||0,category:"rareté"},{value:"uncommon",label:J.uncommon,count:d?.rarity_breakdown?.uncommon||0,category:"rareté"},{value:"rare",label:J.rare,count:d?.rarity_breakdown?.rare||0,category:"rareté"},{value:"super_rare",label:J.super_rare,count:d?.rarity_breakdown?.super_rare||0,category:"rareté"},{value:"secret_rare",label:J.secret_rare,count:d?.rarity_breakdown?.secret_rare||0,category:"rareté"},...x.map(b=>({value:b.id,label:b.name,count:d?.booster_breakdown?.[b.id]||0,category:"booster"}))];return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs(A,{to:"/",className:"flex items-center space-x-2 text-blue-300 hover:text-white transition-colors text-sm sm:text-base",children:[e.jsx(yt,{size:18}),e.jsx("span",{children:"Retour à l'accueil"})]}),e.jsxs("div",{className:"text-left sm:text-right w-full sm:w-auto",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"Ma Collection"}),e.jsx("p",{className:"text-blue-200 text-sm sm:text-base",children:d?`${d.unique_cards}/${r.length} cartes (${d.collection_completion}%)`:"Chargement..."})]})]}),e.jsx("div",{className:"bg-blue-800/40 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-blue-600/30",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 sm:gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:d?.total_cards||0}),e.jsx("div",{className:"text-blue-200 text-xs sm:text-sm",children:"Cartes totales"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:d?.unique_cards||0}),e.jsx("div",{className:"text-blue-200 text-xs sm:text-sm",children:"Cartes uniques"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-white",children:[d?.collection_completion||0,"%"]}),e.jsx("div",{className:"text-blue-200 text-xs sm:text-sm",children:"Collection"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:d?.missing_cards||0}),e.jsx("div",{className:"text-blue-200 text-xs sm:text-sm",children:"Manquantes"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1 sm:border-l border-blue-600/30 sm:pl-4",children:[e.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[e.jsx(I,{size:18}),S]}),e.jsx("div",{className:"text-blue-200 text-xs sm:text-sm",children:"Berrys"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-300",size:18}),e.jsx("input",{type:"text",placeholder:"Rechercher...",value:a,onChange:b=>n(b.target.value),className:"w-full pl-9 pr-3 py-2 sm:py-3 text-sm sm:text-base bg-blue-800/40 border border-blue-600/30 rounded-lg text-white placeholder-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>P(!L),className:`flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-blue-600/30 rounded-lg transition-colors ${L?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-blue-800/40 text-white hover:bg-blue-700/40"}`,children:[e.jsx(I,{size:18}),e.jsx("span",{className:"whitespace-nowrap",children:L?"Annuler":"Vendre"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!u),className:"flex w-full sm:w-auto items-center justify-center space-x-2 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base bg-blue-800/40 border border-blue-600/30 rounded-lg text-white hover:bg-blue-700/40 transition-colors",children:[e.jsx(ur,{size:18}),e.jsx("span",{children:"Filtres"}),(i!=="all"||a)&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:"!"})]}),u&&e.jsx("div",{className:"absolute top-full mt-2 left-0 sm:right-0 sm:left-auto bg-blue-800 border border-blue-600 rounded-lg shadow-xl z-10 w-64 sm:min-w-64 max-h-96 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-300 font-semibold mb-2 uppercase tracking-wide",children:"Général"}),N.filter(b=>b.category==="général").map(b=>e.jsxs("button",{onClick:()=>{m(b.value),c(!1)},className:`w-full text-left px-3 py-2 rounded transition-colors flex justify-between items-center ${i===b.value?"bg-blue-600 text-white":"text-blue-200 hover:bg-blue-700 hover:text-white"}`,children:[e.jsx("span",{children:b.label}),e.jsx("span",{className:"text-xs opacity-75",children:b.count})]},b.value))]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-300 font-semibold mb-2 uppercase tracking-wide",children:"Rareté"}),N.filter(b=>b.category==="rareté").map(b=>e.jsxs("button",{onClick:()=>{m(b.value),c(!1)},className:`w-full text-left px-3 py-2 rounded transition-colors flex justify-between items-center ${i===b.value?"bg-blue-600 text-white":"text-blue-200 hover:bg-blue-700 hover:text-white"}`,children:[e.jsx("span",{children:b.label}),e.jsx("span",{className:"text-xs opacity-75",children:b.count})]},b.value))]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-300 font-semibold mb-2 uppercase tracking-wide",children:"Boosters"}),N.filter(b=>b.category==="booster").map(b=>e.jsxs("button",{onClick:()=>{m(b.value),c(!1)},className:`w-full text-left px-3 py-2 rounded transition-colors flex justify-between items-center ${i===b.value?"bg-blue-600 text-white":"text-blue-200 hover:bg-blue-700 hover:text-white"}`,children:[e.jsx("span",{className:"text-sm",children:b.label}),e.jsx("span",{className:"text-xs opacity-75",children:b.count})]},b.value))]}),(i!=="all"||a)&&e.jsx("div",{className:"pt-2 border-t border-blue-600",children:e.jsxs("button",{onClick:re,className:"w-full text-left px-3 py-2 rounded text-red-300 hover:bg-red-600 hover:text-white transition-colors flex items-center space-x-2",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:"Effacer filtres"})]})})]})})]})]}),D.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12 px-4",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-3 sm:mb-4",children:"🔍"}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:"Aucune carte trouvée"}),e.jsx("p",{className:"text-blue-200 text-sm sm:text-base",children:a||i!=="all"?"Essayez de modifier vos filtres de recherche.":"Commencez à ouvrir des boosters pour construire votre collection !"}),(a||i!=="all")&&e.jsx("button",{onClick:re,className:"mt-4 py-2 px-4 sm:py-3 sm:px-6 text-sm sm:text-base rounded-lg font-bold btn-primary",children:"Effacer les filtres"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{className:"text-blue-200 text-xs sm:text-sm",children:[D.length," carte(s)"]}),(a||i!=="all")&&e.jsxs("button",{onClick:re,className:"flex items-center space-x-1 sm:space-x-2 text-blue-300 hover:text-white transition-colors text-xs sm:text-sm",children:[e.jsx(ie,{size:14}),e.jsx("span",{children:"Effacer filtres"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 md:gap-6",children:Ne.map(b=>{const C=t.find(X=>X.card_id===b.id),k=!!C,M=k&&C.quantity>1,F=Lr[b.rarity];return e.jsx("div",{className:`relative transition-all duration-300 hover:scale-105 ${k?"":"opacity-40 grayscale hover:opacity-60"}`,children:k?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{card:b,quantity:C.quantity,isFavorite:C.is_favorite,onToggleFavorite:()=>Ce(b.id),onCardClick:me,className:"max-w-xs mx-auto hover:shadow-2xl",showStats:!0}),L&&M&&e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 w-11/12",children:e.jsxs("button",{onClick:()=>_e(b.id,1),className:"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-2 px-3 rounded-lg shadow-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(I,{size:16}),e.jsxs("span",{children:["Vendre (",F," Berrys)"]})]})}),L&&!M&&C.quantity===1&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsxs("div",{className:"text-center text-white p-2 sm:p-4",children:[e.jsx("div",{className:"text-xl sm:text-2xl mb-1 sm:mb-2",children:"⚠️"}),e.jsx("div",{className:"font-bold text-xs sm:text-sm",children:"Dernière carte"}),e.jsx("div",{className:"text-xs text-gray-300 hidden sm:block",children:"Gardez au moins 1 exemplaire"})]})})]}):e.jsxs("div",{className:"relative max-w-xs mx-auto",children:[e.jsx(Fe,{card:b,onCardClick:me,showStats:!0,className:"hover:shadow-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsxs("div",{className:"text-center text-white p-2 sm:p-4",children:[e.jsx("div",{className:"text-3xl sm:text-5xl mb-2 sm:mb-3",children:"🔒"}),e.jsx("div",{className:"font-bold text-sm sm:text-lg mb-1",children:"Non obtenue"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-300 hidden sm:block",children:"Ouvrez des boosters"})]})})]})},b.id)})}),$<D.length&&e.jsxs("div",{ref:O,className:"py-8 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-blue-300 mt-2",children:"Chargement..."})]})]}),t.some(b=>b.is_favorite)&&i!=="favorites"&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>m("favorites"),className:"flex items-center space-x-2 mx-auto text-yellow-300 hover:text-yellow-100 transition-colors text-sm sm:text-base",children:[e.jsx(fr,{size:14}),e.jsx("span",{children:"Voir mes favoris"})]})}),f&&v&&e.jsx(Ct,{card:v,isOpen:f,onClose:ke})]})};function Tr(){const[t,s]=o.useState([]),[r,l]=o.useState(null),[a,n]=o.useState(!0),[i,m]=o.useState(null),[u,c]=o.useState("all");o.useEffect(()=>{d()},[]);const d=async()=>{try{n(!0);const[y,v]=await Promise.all([_.getAchievements(),_.getAchievementStats()]);y.success&&s(y.data),v.success&&l(v.data)}catch(y){console.error("Erreur lors du chargement des achievements:",y)}finally{n(!1)}},h=async y=>{try{m(y);const v=await _.claimAchievement(y);v.success&&(await d(),alert(`Vous avez gagné ${v.data.berrys_earned} Berrys !`))}catch(v){console.error("Erreur lors de la récupération de l'achievement:",v),alert(v.message||"Erreur lors de la récupération de l'achievement")}finally{m(null)}},x=["all",...Array.from(new Set(t.map(y=>y.category)))],g=u==="all"?t:t.filter(y=>y.category===u),w=g.reduce((y,v)=>(y[v.category]||(y[v.category]=[]),y[v.category].push(v),y),{});return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-xl text-white",children:"Chargement des achievements..."})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-white mb-2 flex items-center gap-3",children:[e.jsx(Oe,{className:"w-10 h-10 text-yellow-500"}),"Achievements"]}),e.jsx("p",{className:"text-white text-lg",children:"Débloquez des achievements pour gagner des Berrys !"}),!a&&t.length===0&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg",children:[e.jsx("p",{className:"text-white font-bold mb-2",children:"ℹ️ Aucun achievement disponible"}),e.jsxs("p",{className:"text-white text-sm",children:["Total d'achievements chargés : ",t.length]}),e.jsx("p",{className:"text-white text-sm mt-2",children:"Vérifiez la console du navigateur (F12) pour plus de détails sur la réponse de l'API."})]})]}),r&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:r.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:r.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Complétés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:r.claimed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Réclamés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:r.unclaimed}),e.jsx("div",{className:"text-sm text-gray-600",children:"À réclamer"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:r.total_berrys_earned}),e.jsx("div",{className:"text-sm text-gray-600",children:"Berrys gagnés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:r.total_berrys_available}),e.jsx("div",{className:"text-sm text-gray-600",children:"Berrys disponibles"})]})]}),e.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:x.map(y=>e.jsx("button",{onClick:()=>c(y),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${u===y?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:y==="all"?"Tous":y},y))}),e.jsx("div",{className:"space-y-8",children:Object.entries(w).map(([y,v])=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2 text-white",children:[e.jsx(nr,{className:"w-6 h-6 text-yellow-400"}),y]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:v.map(p=>{const f=p.progress>=p.threshold,j=p.is_claimed;return e.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 border-2 transition-all ${j?"border-purple-500 opacity-75":f?"border-green-500":"border-gray-200"}`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl",children:p.icon||"🏆"}),e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:p.name})]}),e.jsx("div",{className:"flex-shrink-0",children:j?e.jsx(ge,{className:"w-6 h-6 text-purple-600"}):f?e.jsx(ge,{className:"w-6 h-6 text-green-600"}):e.jsx(dr,{className:"w-6 h-6 text-gray-300"})})]}),e.jsx("p",{className:"text-sm text-gray-600 ml-11",children:p.description})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progression"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold text-gray-700",children:[p.progress," / ",p.threshold]}),e.jsxs("span",{className:`font-bold text-lg ${f?"text-green-600":"text-blue-600"}`,children:[p.completion_percentage,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full transition-all flex items-center justify-center ${f?"bg-green-500":"bg-blue-500"}`,style:{width:`${p.completion_percentage}%`},children:p.completion_percentage>15&&e.jsxs("span",{className:"text-xs font-bold text-white",children:[p.completion_percentage,"%"]})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("span",{className:"font-bold text-yellow-600",children:[p.reward_berrys," Berrys"]})]}),f&&!j&&e.jsx("button",{onClick:()=>h(p.id),disabled:i===p.id,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 font-semibold",children:i===p.id?"Réclamation...":"Réclamer"}),j&&e.jsx("span",{className:"text-sm text-purple-600 font-semibold",children:"Réclamé"})]}),j&&p.claimed_at&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Réclamé le ",new Date(p.claimed_at).toLocaleDateString("fr-FR")]})]},p.id)})})]},y))}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Oe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Aucun achievement dans cette catégorie"})]})]})})}const Ar={secret_rare:"Secret Rare",super_rare:"Super Rare",rare:"Rare",uncommon:"Uncommon",common:"Common"},Pr={secret_rare:"text-purple-400",super_rare:"text-yellow-400",rare:"text-blue-400",uncommon:"text-green-400",common:"text-gray-400"},Mr=()=>{const[t,s]=o.useState([]),[r,l]=o.useState(!0),[a,n]=o.useState(null);o.useEffect(()=>{i()},[]);const i=async()=>{try{l(!0);const c=await _.getLeaderboard();c.success&&s(c.leaderboard)}catch(c){n(c.message||"Erreur lors du chargement du leaderboard"),console.error("Erreur leaderboard:",c)}finally{l(!1)}},m=c=>{switch(c){case 1:return"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white";case 2:return"bg-gradient-to-r from-gray-400 to-gray-500 text-white";case 3:return"bg-gradient-to-r from-amber-700 to-amber-800 text-white";default:return"bg-gray-700 text-white"}},u=c=>{switch(c){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return c}};return r?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"text-xl text-gray-300",children:"Chargement du leaderboard..."})}):a?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"text-xl text-red-400",children:a})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-purple-600",children:"🏆 Leaderboard - Top 3"}),e.jsx("div",{className:"space-y-6",children:t.map(c=>e.jsxs("div",{className:`rounded-xl p-6 shadow-2xl transform transition-all duration-300 hover:scale-105 ${m(c.rank)}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-5xl",children:u(c.rank)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:c.username}),e.jsxs("p",{className:"text-sm opacity-80",children:["Rang #",c.rank]})]})]})}),e.jsxs("div",{className:"bg-black bg-opacity-30 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Collection de Cartes"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white border-opacity-20",children:[e.jsx("th",{className:"text-left py-2 px-3",children:"Rareté"}),e.jsx("th",{className:"text-right py-2 px-3",children:"Nombre"})]})}),e.jsx("tbody",{children:Object.entries(Ar).map(([d,h])=>e.jsxs("tr",{className:"border-b border-white border-opacity-10",children:[e.jsx("td",{className:`py-2 px-3 font-medium ${Pr[d]}`,children:h}),e.jsx("td",{className:"text-right py-2 px-3 font-bold",children:c[d]})]},d))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-white border-opacity-30",children:[e.jsx("td",{className:"py-2 px-3 font-bold",children:"Total"}),e.jsx("td",{className:"text-right py-2 px-3 font-bold text-xl",children:c.secret_rare+c.super_rare+c.rare+c.uncommon+c.common})]})})]})})]})]},c.user_id))}),t.length===0&&e.jsx("div",{className:"text-center text-gray-400 text-xl mt-12",children:"Aucun joueur dans le leaderboard pour le moment."})]})})},zr=()=>{const[t,s]=o.useState(""),[r,l]=o.useState(""),[a,n]=o.useState(""),[i,m]=o.useState(!1),{login:u}=se(),c=de(),h=W().state?.from?.pathname||"/",x=async g=>{g.preventDefault(),n(""),m(!0);try{await u({username:t,password:r}),c(h,{replace:!0})}catch(w){n(w instanceof Error?w.message:"Erreur de connexion")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 sm:py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:e.jsxs("div",{className:"max-w-md w-full space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mb-3 sm:mb-4",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white",children:"OP"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-white",children:"Connexion"}),e.jsxs("p",{className:"mt-2 text-xs sm:text-sm text-gray-300",children:["Ou"," ",e.jsx(A,{to:"/register",className:"font-medium text-yellow-400 hover:text-yellow-300 transition-colors",children:"créez un compte"})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl shadow-2xl p-6 sm:p-8 border border-white/20",children:e.jsxs("form",{className:"space-y-4 sm:space-y-6",onSubmit:x,children:[a&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-2 sm:p-3",children:e.jsx("p",{className:"text-red-200 text-xs sm:text-sm text-center",children:a})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Nom d'utilisateur"}),e.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"relative block w-full px-3 py-2 sm:py-3 border border-white/30 rounded-lg placeholder-gray-400 text-white bg-white/10 backdrop-blur focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent focus:z-10 text-sm sm:text-base transition-all",placeholder:"Nom d'utilisateur",value:t,onChange:g=>s(g.target.value),disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Mot de passe"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full px-3 py-2 sm:py-3 border border-white/30 rounded-lg placeholder-gray-400 text-white bg-white/10 backdrop-blur focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent focus:z-10 text-sm sm:text-base transition-all",placeholder:"Mot de passe",value:r,onChange:g=>l(g.target.value),disabled:i})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 sm:py-3 px-4 border border-transparent text-sm sm:text-base font-medium rounded-lg text-white bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:i?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Connexion..."})]}):"Se connecter"})}),e.jsx("div",{className:"text-center",children:e.jsx(A,{to:"/",className:"text-gray-300 hover:text-white transition-colors text-xs sm:text-sm",children:"← Retour à l'accueil"})})]})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-lg p-3 sm:p-4 border border-white/10",children:[e.jsx("p",{className:"text-xs text-gray-300 text-center mb-2",children:"Création de compte :"}),e.jsx("div",{className:"text-xs text-gray-400 space-y-1 text-center",children:e.jsx("div",{children:"Pas de compte ? Créez-en un gratuitement !"})})]})]})})},Dr=()=>{const[t,s]=o.useState(""),[r,l]=o.useState(""),[a,n]=o.useState(""),[i,m]=o.useState(""),[u,c]=o.useState(!1),{register:d}=se(),h=de(),x=()=>t.length<3?(m("Le nom d'utilisateur doit contenir au moins 3 caractères"),!1):/^[a-zA-Z0-9_-]+$/.test(t)?r.length<6?(m("Le mot de passe doit contenir au moins 6 caractères"),!1):r!==a?(m("Les mots de passe ne correspondent pas"),!1):!0:(m("Le nom d'utilisateur ne peut contenir que des lettres, chiffres, tirets et underscores"),!1),g=async w=>{if(w.preventDefault(),m(""),!!x()){c(!0);try{await d({username:t,password:r}),h("/",{replace:!0})}catch(y){m(y instanceof Error?y.message:"Erreur lors de l'inscription")}finally{c(!1)}}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 sm:py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:e.jsxs("div",{className:"max-w-md w-full space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mb-3 sm:mb-4",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white",children:"OP"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-white",children:"Créer un compte"}),e.jsxs("p",{className:"mt-2 text-xs sm:text-sm text-gray-300",children:["Ou"," ",e.jsx(A,{to:"/login",className:"font-medium text-yellow-400 hover:text-yellow-300 transition-colors",children:"connectez-vous"})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl shadow-2xl p-6 sm:p-8 border border-white/20",children:e.jsxs("form",{className:"space-y-4 sm:space-y-6",onSubmit:g,children:[i&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-2 sm:p-3",children:e.jsx("p",{className:"text-red-200 text-xs sm:text-sm text-center",children:i})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Nom d'utilisateur"}),e.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"relative block w-full px-3 py-2 sm:py-3 border border-white/30 rounded-lg placeholder-gray-400 text-white bg-white/10 backdrop-blur focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent focus:z-10 text-sm sm:text-base transition-all",placeholder:"Nom d'utilisateur",value:t,onChange:w=>s(w.target.value),disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Mot de passe"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"relative block w-full px-3 py-2 sm:py-3 border border-white/30 rounded-lg placeholder-gray-400 text-white bg-white/10 backdrop-blur focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent focus:z-10 text-sm sm:text-base transition-all",placeholder:"Mot de passe",value:r,onChange:w=>l(w.target.value),disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirmer le mot de passe"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"relative block w-full px-3 py-2 sm:py-3 border border-white/30 rounded-lg placeholder-gray-400 text-white bg-white/10 backdrop-blur focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent focus:z-10 text-sm sm:text-base transition-all",placeholder:"Confirmer le mot de passe",value:a,onChange:w=>n(w.target.value),disabled:u})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 sm:py-3 px-4 border border-transparent text-sm sm:text-base font-medium rounded-lg text-white bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:u?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Création..."})]}):"Créer mon compte"})}),e.jsx("div",{className:"text-center",children:e.jsx(A,{to:"/",className:"text-gray-300 hover:text-white transition-colors text-xs sm:text-sm",children:"← Retour à l'accueil"})})]})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-lg p-3 sm:p-4 border border-white/10",children:[e.jsx("p",{className:"text-xs text-gray-300 text-center mb-2",children:"Exigences :"}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1 text-center",children:[e.jsx("div",{children:"• Nom: 3+ caractères"}),e.jsx("div",{children:"• Mot de passe: 6+ caractères"})]})]})]})})},Or=()=>{const{user:t}=se(),s=de(),[r,l]=o.useState("stats"),[a,n]=o.useState(!0),[i,m]=o.useState(null),[u,c]=o.useState([]),[d,h]=o.useState([]),[x,g]=o.useState({message:"",berry_reward:"",booster_reward:""});o.useEffect(()=>{if(!t?.is_admin){s("/");return}w()},[t,s]);const w=async()=>{try{n(!0);const p=await fetch("http://framboise.lan:5000/api/admin/dashboard/stats",{credentials:"include",headers:{Authorization:`Bearer ${_.getAccessToken()}`}}),f=await fetch("http://framboise.lan:5000/api/admin/dashboard/activity",{credentials:"include",headers:{Authorization:`Bearer ${_.getAccessToken()}`}}),j=await fetch("http://framboise.lan:5000/api/admin/notifications",{credentials:"include",headers:{Authorization:`Bearer ${_.getAccessToken()}`}}),S=await p.json(),R=await f.json(),L=await j.json();m(S.stats),c(R.activities||[]),h(L.notifications||[])}catch(p){console.error("Erreur chargement admin:",p)}finally{n(!1)}},y=async p=>{p.preventDefault();try{await fetch("http://framboise.lan:5000/api/admin/notifications",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_.getAccessToken()}`},body:JSON.stringify({message:x.message,berry_reward:x.berry_reward?parseInt(x.berry_reward):null,booster_reward:x.booster_reward?parseInt(x.booster_reward):null})}),g({message:"",berry_reward:"",booster_reward:""}),await w(),alert("Notification envoyée avec succès !")}catch(f){console.error("Erreur envoi notification:",f),alert("Erreur lors de l'envoi de la notification")}},v=async p=>{if(confirm("Désactiver cette notification ?"))try{await fetch(`http://framboise.lan:5000/api/admin/notifications/${p}`,{method:"DELETE",credentials:"include",headers:{Authorization:`Bearer ${_.getAccessToken()}`}}),await w()}catch(f){console.error("Erreur suppression notification:",f)}};return a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-xl",children:"Chargement du dashboard admin..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold flex items-center gap-3 mb-2",children:[e.jsx(ve,{className:"text-purple-400",size:40}),"Administration"]}),e.jsxs("p",{className:"text-slate-300",children:["Bienvenue, ",t?.username]})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-700",children:[e.jsxs("button",{onClick:()=>l("stats"),className:`px-6 py-3 font-semibold transition-all ${r==="stats"?"text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-white"}`,children:[e.jsx(De,{className:"inline mr-2",size:20}),"Statistiques"]}),e.jsxs("button",{onClick:()=>l("notifications"),className:`px-6 py-3 font-semibold transition-all ${r==="notifications"?"text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-white"}`,children:[e.jsx(ze,{className:"inline mr-2",size:20}),"Notifications"]}),e.jsxs("button",{onClick:()=>l("activity"),className:`px-6 py-3 font-semibold transition-all ${r==="activity"?"text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-white"}`,children:[e.jsx($e,{className:"inline mr-2",size:20}),"Activité"]})]}),r==="stats"&&i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Utilisateurs"}),e.jsx(vr,{className:"text-blue-400",size:24})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-3xl font-bold",children:i.users.total}),e.jsxs("p",{className:"text-sm text-slate-400",children:[i.users.active," actifs • ",i.users.new_today," nouveaux aujourd'hui"]}),e.jsxs("p",{className:"text-sm text-purple-400",children:[i.users.admins," admins"]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Économie"}),e.jsx(I,{className:"text-yellow-400",size:24})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-3xl font-bold",children:i.economy.total_berrys.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-400",children:"Total Berrys en circulation"}),e.jsxs("p",{className:"text-sm text-yellow-400",children:["Moyenne: ",Math.round(i.economy.avg_berrys)," Berrys/joueur"]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Boosters"}),e.jsx(ne,{className:"text-green-400",size:24})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-3xl font-bold",children:i.boosters.total_opened}),e.jsx("p",{className:"text-sm text-slate-400",children:"Boosters ouverts"}),e.jsxs("p",{className:"text-sm text-green-400",children:["Plus populaire: ",i.boosters.most_popular]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Cartes"}),e.jsx($e,{className:"text-orange-400",size:24})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-3xl font-bold",children:i.cards.total_collected}),e.jsxs("p",{className:"text-sm text-slate-400",children:[i.cards.unique_cards," cartes uniques"]}),e.jsxs("p",{className:"text-sm text-orange-400",children:["Moyenne: ",i.cards.avg_per_user," cartes/joueur"]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sécurité"}),e.jsx(ve,{className:"text-red-400",size:24})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-3xl font-bold text-red-400",children:i.security.failed_logins_24h}),e.jsx("p",{className:"text-sm text-slate-400",children:"Échecs de connexion (24h)"}),e.jsxs("p",{className:"text-sm text-red-400",children:[i.security.suspicious_activities," activités suspectes"]})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(De,{className:"text-yellow-400"}),"Top Joueurs"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700 text-left",children:[e.jsx("th",{className:"pb-3 font-semibold text-slate-300",children:"#"}),e.jsx("th",{className:"pb-3 font-semibold text-slate-300",children:"Joueur"}),e.jsx("th",{className:"pb-3 font-semibold text-slate-300",children:"Berrys"}),e.jsx("th",{className:"pb-3 font-semibold text-slate-300",children:"Cartes"})]})}),e.jsx("tbody",{children:i.top_players.map((p,f)=>e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("td",{className:"py-3 text-slate-400",children:f+1}),e.jsx("td",{className:"py-3 font-semibold",children:p.username}),e.jsx("td",{className:"py-3 text-yellow-400",children:p.berrys.toLocaleString()}),e.jsx("td",{className:"py-3 text-blue-400",children:p.cards_count})]},f))})]})})]})]}),r==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"text-blue-400"}),"Envoyer une notification globale"]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Message *"}),e.jsx("textarea",{value:x.message,onChange:p=>g({...x,message:p.target.value}),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:border-blue-400 focus:outline-none",rows:3,required:!0,placeholder:"Annonce importante pour tous les joueurs..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[e.jsx(I,{className:"inline mr-1",size:16}),"Récompense Berrys (optionnel)"]}),e.jsx("input",{type:"number",value:x.berry_reward,onChange:p=>g({...x,berry_reward:p.target.value}),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:border-blue-400 focus:outline-none",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[e.jsx(ne,{className:"inline mr-1",size:16}),"Récompense Boosters (optionnel)"]}),e.jsx("input",{type:"number",value:x.booster_reward,onChange:p=>g({...x,booster_reward:p.target.value}),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:border-blue-400 focus:outline-none",placeholder:"0",min:"0"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Envoyer la notification"})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Historique des notifications"}),e.jsx("div",{className:"space-y-3",children:d.length===0?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Aucune notification envoyée"}):d.map(p=>e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white mb-2",children:p.message}),e.jsxs("div",{className:"flex gap-4 text-sm text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(or,{size:14}),new Date(p.created_at).toLocaleString("fr-FR")]}),p.berry_reward&&e.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[e.jsx(I,{size:14}),"+",p.berry_reward," Berrys"]}),p.booster_reward&&e.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[e.jsx(ne,{size:14}),"+",p.booster_reward," Boosters"]}),e.jsxs("span",{className:"text-blue-400",children:["Par: ",p.sent_by]})]})]}),p.is_active&&e.jsx("button",{onClick:()=>v(p.id),className:"text-red-400 hover:text-red-300 text-sm font-semibold ml-4",children:"Désactiver"})]},p.id))})]})]}),r==="activity"&&e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx($e,{className:"text-green-400"}),"Activité récente"]}),e.jsx("div",{className:"space-y-3",children:u.length===0?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Aucune activité récente"}):u.map(p=>e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-white mb-1",children:p.description}),e.jsxs("div",{className:"flex gap-3 text-sm text-slate-400",children:[p.username&&e.jsx("span",{className:"text-blue-400",children:p.username}),e.jsx("span",{children:new Date(p.created_at).toLocaleString("fr-FR")}),e.jsx("span",{className:"text-slate-500",children:p.type})]})]},p.id))})]})]})})};function Ir(){return e.jsx(sr,{children:e.jsx(Ws,{children:e.jsxs(js,{children:[e.jsx(V,{path:"/login",element:e.jsx(he,{requireAuth:!1,children:e.jsx(zr,{})})}),e.jsx(V,{path:"/register",element:e.jsx(he,{requireAuth:!1,children:e.jsx(Dr,{})})}),e.jsx(V,{path:"/admin",element:e.jsx(he,{children:e.jsx(Or,{})})}),e.jsxs(V,{path:"/",element:e.jsx(he,{children:e.jsx(_r,{})}),children:[e.jsx(V,{index:!0,element:e.jsx(Er,{})}),e.jsx(V,{path:"boosters",element:e.jsx(Br,{})}),e.jsx(V,{path:"collection",element:e.jsx($r,{})}),e.jsx(V,{path:"achievements",element:e.jsx(Tr,{})}),e.jsx(V,{path:"leaderboard",element:e.jsx(Mr,{})})]})]})})})}Rt.createRoot(document.getElementById("root")).render(e.jsx(Et.StrictMode,{children:e.jsx(Ir,{})}));
